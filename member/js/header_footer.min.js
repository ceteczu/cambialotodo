var TT_NS=function(d,b){d.init=function(){d.header.init();d.footer.init()};d.header={init:function(){this.signBind();this.getUser();this.bindCart();this.cartNumber();this.bindCurrency()},signBind:function(){var a=this;b("#signin").click(function(){a.ajaxSig(b(".pu_blockWarp"))});b("#sign_password").keypress(function(c){if(13==c.which)return a.ajaxSig(b(".pu_blockWarp")),!1})},getUser:function(){b.ajax({type:"GET",cache:!1,url:"/member/getuser",dataType:"json",success:function(a){1==a.ret&&b("#loginBox").html(a.data)}})},ajaxSig:function(a){var c=a.find("#sign_email").val(),e=a.find("#sign_password").val(),d=a.find("#sign_email").next(".help-block"),f=a.find("#sign_email").parents(".controls"),g=a.find("#sign_password").next(".help-block"),h=a.find("#sign_password").parents(".controls"),l=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;""!=c?(isok=l.test(c))?(f.removeClass("error"),d.html("")):(d.html(TT_NS.lang.getLangForKey("message.wrongEmail")),f.addClass("error")):(d.html(TT_NS.lang.getLangForKey("message.enterYourEmail")),f.addClass("error"));""==e?(g.html(TT_NS.lang.getLangForKey("message.enterYourPassword")),h.addClass("error")):(h.removeClass("error"),g.html(""));a.find("#sign_email,#sign_password").focus(function(){b(this).siblings(".help-block").text("");b(this).parents(".controls").removeClass("error")});0==a.find(".error").length&&b.ajax({type:"post",url:"/member/userlogin",data:{email:c,pw:e},success:function(a){1==a.ret?(a=window.location.href,b(".signJoin .controls").addClass("success"),location.href=a,g.html(""),d.html("")):l.test(c)&&""!=e&&(f.addClass("error"),h.addClass("error"),g.html(TT_NS.lang.getLangForKey("message.usernameOrPassword")))},error:function(b,c,e){a.find(".signJoin .controls").addClass("error");a.find("#sign_password").next(".help-block").html(e)},dataType:"json"})},bindCart:function(){b("#cartNumber").hover(function(){var a=d.cookie.get("plist");b.post("/cart/ajaxcartnum",function(a){1==a.ret?b("#cartNumber").children(".icon-cart").text(a.data.cartNumber):b("#cartNumber").children(".icon-cart").text(0)},"json");null!=a?d.header.showCart():1>b(".noneProduct").length&&(b(".cart_content").html(""),b(".cart_content").append('\x3cdiv class\x3d"noneProduct"\x3e'+TT_NS.lang.getLangForKey("message.shoppingCartIsEmpty")+'\x3c/div\x3e\x3cdiv class\x3d"viewCart"\x3e\x3ca href\x3d"'+TT_CONFIG.mainUrl+'/" class\x3d"btn btn-orange"\x3e'+TT_NS.lang.getLangForKey("common.continueShopping")+"\x3c/a\x3e\x3c/div\x3e"))},function(){carReady=!1});b(".dealsNav").prev("a").mouseover(function(){var a=b(".dealsNav").width();b(".dealsNav").css({"margin-left":-a/2+70})})},showCart:function(){var a=!1;0==a&&(0==b(".cart_content").children().length&&b(".cart_content").append("\x3cdiv class\x3d'loading-ajax' /\x3e"),b.ajax({type:"get",url:"/cart/ajaxshowcart",cache:!1,success:function(c){var e="";1==c.ret?(e+='\x3cdiv class\x3d"miniScroll"\x3e',b.each(c.data.result,function(a,c){e+='\x3cp class\x3d"miniCarWare"\x3e'+TT_NS.lang.getLangForKey("product.shippingFrom")+" "+a+" "+TT_NS.lang.getLangForKey("product.warehouse")+'\x3cspan\x3e\x3c/span\x3e\x3c/p\x3e\x3cul class\x3d"cartWarp"\x3e';b.each(c,function(b,c){e+='\x3cli class\x3d"lbBox" id\x3d"'+c.listingId+'"\x3e\x3ca class\x3d"cartHeader_IMG lineBlock" href\x3d"'+TT_CONFIG.mainUrl+"/"+c.url+'.html"\x3e\x3cimg src\x3d"'+d.config.url60+c.imageUrl+'" /\x3e\x3c/a\x3e\x3cdiv class\x3d"lineBlock cartHeader_TXT"\x3e\x3ca class\x3d"cartTxt" href\x3d"'+TT_CONFIG.mainUrl+"/"+c.url+'.html"\x3e'+c.title+'\x3c/a\x3e\x3cp\x3e\x3cspan class\x3d"cartPrice"\x3e'+c.symbol+c.nowprice+"\x3c/span\x3e\x3cspan\x3ex"+c.num+'\x3c/span\x3e\x3c/p\x3e\x3c/div\x3e\x3ca class\x3d"icon-small-close dlCart" TT_warehouse\x3d"'+a+'" listing_id\x3d"'+c.listingId+'" href\x3d"javascript:;"\x3e \x3c/a\x3e\x3c/li\x3e'});e+="\x3c/ul\x3e"}),e+='\x3c/div\x3e\x3cdiv class\x3d"viewCart"\x3e\x3ca href\x3d"'+TT_CONFIG.cartUrl+'" class\x3d"btn btn-orange"\x3e'+TT_NS.lang.getLangForKey("common.viewCartCheckOut")+"\x3c/a\x3e\x3c/div\x3e"):e+='\x3cdiv class\x3d"noneProduct"\x3e'+TT_NS.lang.getLangForKey("message.shoppingCartIsEmpty")+'\x3c/div\x3e\x3cdiv class\x3d"viewCart"\x3e\x3ca href\x3d"'+domain+'" class\x3d"btn btn-orange"\x3e'+TT_NS.lang.getLangForKey("common.continueShopping")+"\x3c/a\x3e\x3c/div\x3e";b(".cart_content").html(e);a=!0;d.header.dlCart();b(".loading-ajax").remove()},error:function(a,e,d){html='\x3cdiv class\x3d"noneProduct"\x3e'+d+"\x3c/div\x3e";b(".cart_content").html(html)},dataType:"json"}))},dlCart:function(){b(".dlCart").click(function(){b(this).unbind("click");var a=b(this).parents("li"),c=b(this).attr("listing_id"),e=b(this).attr("TT_warehouse");b.ajax({type:"GET",url:"/cart/ajaxdeletecart",timeout:1E4,data:{listing_id:c,TT_warehouse:e},cache:!1,dataType:"json",success:function(a){if(1==a.status){a=b("#cartNumber").children(".icon-cart");var c=parseInt(a.text())-1;0>=c&&(c=0);a.text(c);b("#item").text(c);0==b(".miniScroll").find("li").length&&(b(".viewCart").remove(),b(".cart_content").hide())}}});0==a.siblings("li").length&&b(this).parents(".cartWarp").prev(".miniCarWare").remove();a.remove()})},cartNumber:function(){b.ajax({type:"GET",cache:!1,url:"/cart/ajaxcartnum",dataType:"json",success:function(a){1==a.ret?b("#cartNumber").children(".icon-cart").text(a.data.cartNumber):b("#cartNumber").children(".icon-cart").text(0)}})},bindCurrency:function(){b(".pu_navHover").parent(".lineBlock,.rightHover").hover(function(){b(this).find(".pu_blockWarp").show()},function(){b(this).find(".pu_blockWarp").hide()});if(TT_NS.cookie.get("TT_CURR")){var a=TT_NS.cookie.get("TT_CURR");TT_NS.header.switchCurrency(a);a=currencyLabel[a];b(".pu_notranslate").siblings(".pu_navHover").html(a+"\x3ci class\x3d'icon-arr'\x3e \x3c/i\x3e")}b(".pu_notranslate a").bind("click",function(){var a=b(this).attr("data-currency"),e=b(this).children("span").text();TT_NS.header.switchCurrency(a);b(this).parents(".pu_notranslate").siblings(".pu_navHover").html(e+"\x3ci class\x3d'icon-arr'\x3e \x3c/i\x3e");b(this).parents(".pu_notranslate").hide();b(".symbolLab").html(e)})},switchCurrency:function(a){var c=0,e=currencyRate[a],d=currencyLabel[a];TT_NS.cookie.del("TT_CURR");TT_NS.cookie.set("TT_CURR",a);b(".pricelab").each(function(){c=b(this).attr("usvalue");if(""!=c){var a=TT_NS.cookie.get("TT_CURR");b(this).hasClass("price")?"JPY"==a?b(this).html(Math.round(c*e)):b(this).html((Math.round(c*e*100)/100).toFixed(2)):"JPY"==a?b(this).html(d+Math.round(c*e)):b(this).html(d+(Math.round(c*e*100)/100).toFixed(2))}});b(".symbolLab").html(d)}};d.footer={init:function(){this.lookHisory();this.rightHistory();this.subscribe()},lookHisory:function(){var a=this;b.ajax({type:"GET",cache:!1,url:"/member/review",dataType:"html",success:function(c){b(".fixedRecently").html(c);b("img.lazy").lazyload();a.rightHistF()}})},rightHistF:function(){var a=b(".fixedRecently");a.find(".moveHidden").outerHeight(!0);var c=a.find(".moveBox"),e=c.children("li"),d=e.outerHeight(!0);c.css({height:e.length*d});3>=e.length?(a.find(".moveHidden").css({height:e.length*d}),a.css({height:e.length*d})):a.find(".moveHidden").css({height:"168px"});0==e.length?(a.hide(),b(".fixedBTxt").hide()):(a.show(),b(".fixedBTxt").show())},rightHistory:function(){if(TT_NS.cookie.get("WEB-history")&&1==b("#viewedFeatured").length){var a=function(){if(0==b("#viewedFeatured").children().length){$contentLoadRecently=!0;b("#viewedFeatured").append("\x3cdiv class\x3d'loading-ajax' /\x3e");var a=ajaxLang("/member/history");b.ajax({type:"GET",cache:!1,url:a,dataType:"html",success:function(a){b("#viewedFeatured").html(a);b("img.lazy").lazyload();b(".loading-ajax").remove();$contentLoadRecently=!0;try{moveBox(b(".viewedWarp"))}catch(k){}try{moveBox(b(".alsoLike"))}catch(k){}try{moveBox(b(".itemsHistory"))}catch(k){}}})}};$contentLoadRecently=!1;b(window).scroll(function(){var c=b("#viewedFeatured").offset().top;c>=b(window).scrollTop()&&c<b(window).scrollTop()+b(window).height()&&0==$contentLoadRecently&&a()});b("#viewedFeatured").offset().top-this.scTop()<b(window).height()&&0==$contentLoadRecently&&a()}},scTop:function(){return document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop},subscribe:function(){var a=this;b(".savings").children(".btn").on("click",function(){a.check(b(this))})},check:function(a){a=a.siblings("input").val();var b=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;""!=a?b.test(a)?window.location.href=TT_CONFIG.userLangUrl+"/loyalty/subscribe?email\x3d"+a:TT_NS.dialog.confirm({title:TT_NS.lang.getLangForKey("common.tip"),content:TT_NS.lang.getLangForKey("message.wrongEmail"),btnTextA:TT_NS.lang.getLangForKey("product.cancel"),btnTextB:TT_NS.lang.getLangForKey("product.ok")}):TT_NS.dialog.confirm({title:TT_NS.lang.getLangForKey("common.tip"),content:TT_NS.lang.getLangForKey("message.enterYourEmail"),btnTextA:TT_NS.lang.getLangForKey("product.cancel"),btnTextB:TT_NS.lang.getLangForKey("product.ok")})}};return d}(window.TT_NS||{},jQuery);TT_NS.init();function Country(){}Country.prototype={search:function(d){d=$(d).val()+".*";var b=new RegExp(d,"i");$(".country_list li.country_item").each(function(a){$(this).hide()});$(".country_list li.country_item").each(function(a){""!=$.trim($(this).html())&&(b.test($(this).children("span").html().toLowerCase())?$(this).show():$(this).hide())})}};$(function(){var d=new Country;$(".country_list li.country_item").click(function(){var b=$(this).find("span").text(),a=$(this).find("span").attr("data"),c=$(this).parentsUntil(".selectFlag","div.country_all").prev(".pu_navHover");c.children("#current_country_flage").removeClass();c.children("#current_country_flage").addClass("flag_"+a);c.children(".flag_Txt").html(b);$(this).parents(".country_all").hide();TT_NS.cookie.set("TT_COUN",a)});$("input[name\x3dcountry_filter]").keyup(function(){d.search(this)})});1!=TT_CONFIG.website&&$(function(){$(".searchWarp").children("input[type\x3d'button']").click(function(){var a=$(".searchWarp").children("input[type\x3d'text']").val().toLowerCase(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-");""!=a?window.location.href=TT_CONFIG.mainUrl+"/search/"+a+".html":$(".searchWarp").children("input[type\x3d'text']").focus()});var d=$(".searchWarp").children("input[type\x3d'text']"),b;(function(){$(document).on("input propertychange",".searchWarp input[type\x3d'text']",function(){var a=$(this).val().toLowerCase(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-");clearTimeout(b);b=setTimeout(function(){$.ajax({url:TT_CONFIG.mainUrl+"/search/default/ajaxkeyauto\x26keyword\x3d"+a,timeout:1E4,type:"get",dataType:"html",success:function(a){$("#searchThink").html(a);$("#searchThink li").click(function(){var a=$(this).text(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-");d.val(a);window.location.href=TT_CONFIG.mainUrl+"/search/"+a+".html"})}})},300)})})();d.focus(function(){$(".searchWarp").append("\x3cul id\x3d'searchThink'\x3e\x3c/ul\x3e");var a=d.val().toLowerCase(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-");$.ajax({url:TT_CONFIG.mainUrl+"/search/default/ajaxkeyauto\x26keyword\x3d"+a,timeout:1E4,type:"get",dataType:"html",success:function(a){$("#searchThink").html(a);$("#searchThink li").click(function(){var a=$(this).text(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-");d.val(a);window.location.href=TT_CONFIG.mainUrl+"/search/"+a+".html"})}})});d.click(function(a){a.stopPropagation()});$("body").click(function(){$("#searchThink").hide();$("#searchThink").remove()});d.keyup(function(a){$this=$("#searchThink");if(!$this.is(":hidden")){a=a.keyCode;if(38==a||33==a){1==$this.find("li:first.active").length||0==$this.find("li.active").length?$this.children().removeClass("active").last().addClass("active"):$this.find("li.active").removeClass("active").prev().addClass("active");var b=$this.find("li.active").html().replace(/<u>(.*)<\/u>/ig,""),b=b.replace(/(<[a-z0-9\/]+>)+/ig,"");$(this).val(b)}if(40==a||34==a)1==$this.find("li:last.active").length||0==$this.find("li.active").length?$this.children().removeClass("active").first().addClass("active"):$this.find("li.active").removeClass("active").next().addClass("active"),b=$this.find("li.active").html().replace(/<u>(.*)<\/u>/ig,""),b=b.replace(/(<[a-z0-9\/]+>)+/ig,""),$(this).val(b)}});d.keypress(function(a){if(13==a.which)return a=d.val().toLowerCase(),a=a.replace(/^\s*|\s*$/g,""),a=a.replace(/\s+/g,"-"),window.location.href=TT_CONFIG.mainUrl+"/search/"+a+".html",!1})});$(window).scroll(function(){300<$(window).scrollTop()?$(".toTopButton").slideDown(200):$(".toTopButton").slideUp(200)});$(function(){$(".toTopButton").click(function(){$("html,body").animate({scrollTop:0})})});$(function(){$(".subSecondA").hover(function(){var d=$(this).index(),b=$(this).parents(".subSecond").siblings(".subThird");$(this).siblings().removeClass("subSecondAci");$(this).addClass("subSecondAci");b.removeClass("thirdBlock");b.eq(d).addClass("thirdBlock")})});$(function(){var d=!0;$(".insideNav").children(".classifyNav").hover(function(){d&&(d=!1,$(".pu_classifyNavWarp").fadeIn(function(){d=!0}))},function(){$(".pu_classifyNavWarp").fadeOut().stop(!0);$(".pu_classifyNavWarp").fadeOut(function(){d=!0})})});