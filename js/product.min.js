var TT_NS=function(b,a){b.arrivalNotice={arrivalNotice:function(){a(document).on("click","#subscribe_email a.cancel",function(){a("#bm_dialogs_bg").hide();a("#subscribe_email").removeClass("dialogs_show").hide()})}};b.flashdeals={progressBar:function(a,b,d){a=parseFloat(a/b);d.find(".bar_wrap_cont").animate({width:100*a+"%"},1500)},init:function(){a(".showInformation .m_progress_bar").each(function(){var c=a(this).find(".pro_sell").attr("data-sell"),b=a(this).find(".pro_count").attr("data-procount");TT_NS.flashdeals.progressBar(c,b,a(this))});var c=null;a("body").on("mouseover",".flashDeals em",function(){clearTimeout(c);a(".flash_list").show()});a("body").on("mouseout",".flashDeals em",function(){c=setTimeout(function(){a(".flash_list").hide()},300)});a("body").on("mouseover",".flashDeals .order_info",function(){clearTimeout(c)});a("body").on("mouseout",".flashDeals .order_info",function(){c=setTimeout(function(){a(".flash_list").hide()},300)})}};b.shipping={box:null,reqUrl:domain+"index.php?r\x3dshipping/default/ajaxshipping",countries:null,lastReqData:null,waiterUrl:"http://tb.53kf.com/webCompany.php?arg\x3d10045862\x26style\x3d1",country:null,noTrackingNumCate:"SurfaceType",notEmptyFields:"country currency storageId totalPrice listingId qty language".split(" "),getCountries:function(){var c={};a(".all_country").eq(0).children("li").each(function(b,d){var e=a(d).children("em").attr("data");if(!c[e]){var f=a(d).children("em").html();c[e]=f}});return c},checkReqParams:function(a){var c=!0,b;for(b in this.notEmptyFields)if(this.notEmptyFields.hasOwnProperty(b)&&!a[this.notEmptyFields[b]]){c=!1;break}return c},checkNeedReReq:function(a){var c=!1,b;for(b in a)if(a.hasOwnProperty(b)&&a[b]!=this.lastReqData[b]){c=!0;break}return c},init:function(){var c=this.getCountry();a(".shipmentStarts").hide();this.box=a(".dialogs .dialogs_c");this.country=this.country||c;this.countries=this.countries||this.getCountries();a(".state").html("\x3cb\x3e"+this.countries[c]+"\x3c/b\x3e");a(".tt_ns_shipping_to span:first-child").each(function(b,d){a(d).attr("class","flag_"+c)})},changeCountry:function(c){this.country=c;a(".logistics .state").html("\x3cb\x3e"+this.countries[c]+"\x3c/b\x3e");a(".tt_ns_shipping_to span:first-child").each(function(b,d){a(d).attr("class","flag_"+c);a(d).attr("data-code",c)});b.cookie.set("TT_COUN",c)},getCountry:function(){return""==b.cookie.get("TT_COUN")?a("#current_country_flage").attr("data-code"):b.cookie.get("TT_COUN")},getCurrency:function(){return"USD"},getLanguage:function(){var a=TT_NS.lactions.langShort();return TT_GET("lang").getId(a)},getRealCurrency:function(){return null==TT_NS.cookie.get("TT_CURR")?"USD":TT_NS.cookie.get("TT_CURR")},getStorageId:function(){return a("#storageid").val()},getWhouse:function(){return a("#whouse").val()},getListingId:function(){return a("#listingId").val()},getQty:function(){return a("#quantity").val()},getTotalPrice:function(){return(Number(a("#detailPrice").attr("usvalue"))*Number(this.getQty())).toFixed(2)},getShippingData:function(c){var b=!1;c=c||{};c.country=c.country||this.getCountry();c.currency=c.currency||this.getCurrency();c.storageId=c.storageId||this.getStorageId();c.totalPrice=c.totalPrice||this.getTotalPrice();c.listingId=c.listingId||this.getListingId();c.qty=c.qty||this.getQty();c.language=c.language||this.getLanguage();null===this.lastReqData?b=!0:(c.reRequest?b=!0:this.checkNeedReReq(c)&&(b=!0),this.checkReqParams(c)||(b=!1));b&&(this.box.find(".newshopping_address"),this.box.find(".newshopping_address").hide(),this.lastReqData=c,a(".logistics_loading").show(),a(".loading_defeated").hide(),a(".logistics_info").hide(),this.box.find(".loading").show(),this.box.find(".failure").hide(),a.ajax({url:this.reqUrl+TT_NS.lactions.lang(),type:"POST",data:c,timeout:1E4,dataType:"JSON",context:this,success:function(c){a(".loading_defeated").hide();this.renderShipping(c)},error:function(){a(".loading_defeated").show();a(".logistics_loading").hide()}}))},renderShipping:function(c){a(".super_saver").hide();a(".shipmentStarts").hide();a(".via").hide();a(".logistics_b").find(".state").html(c.country_name);if("Y"!=c.shippingInfo.status)a(".logistics").find(".shipping").html("\x3cb\x3e"+strFun("TT_language_"+jsLanguage)["tomtop.shippingmethod.noshipping"]+"\x3c/b\x3e"),a(".logistics").find(".super_saver").html("Unavailable"),this.box.find(".failure").html('Sorry, it seems that there are no available shipping methods for your location.Please \x3ca target\x3d"_blank" href\x3d"'+this.waiterUrl+';"\x3econtact us\x3c/a\x3e   for further assistance.').show(),this.box.find(".loading").hide(),a(".logistics_c").find(".all_country").html("");else{var b="",d={fee:strFun("TT_language_"+jsLanguage)["tomtop.shippingmethod.noshipping"],title:strFun("TT_language_"+jsLanguage)["tomtop.shippingmethod.color:#ff6600noshipping"]},h=c.shippingInfo.data,f=c.countryInfo,g,l,p=null,n,k,m,q='class\x3d"nshipped"',t=currencyRate[this.getRealCurrency()],u=currencyLabel[this.getRealCurrency()],v,w;a(".navFreeshipping").hide();for(var r in h)h.hasOwnProperty(r)&&(0==h[r].isShow?(c="no_",g="Unavailable",v=m="",n="disabled",k=l=""):(m='class\x3d"pricelab" usvalue\x3d"'+h[r].price+'"',c="sel_",n="",null===p?(p=h[r],k="checked",l="select"):l=k="",v=u,g=switchPrice(h[r].price,t)),h[r].type==this.noTrackingNumCate?(c+="a "+l,w=strFun("TT_language_"+jsLanguage)["tomtop.common.no"]):(c+="b "+l,w=strFun("TT_language_"+jsLanguage)["tomtop.common.yes"]),l="0.00"==g?strFun("TT_language_"+jsLanguage)["tomtop.shippingmethod.freeshipping"]:v+g,b+='\x3ctr class\x3d"'+c+'" data-price \x3d "'+l+'" data-usval \x3d "'+h[r].price+'"\x3e\x3ctd class\x3d"c1"\x3e\x3cinput name\x3d"xz" value\x3d"0" type\x3d"radio" '+n+k+'\x3e\x3c/td\x3e\x3ctd class\x3d"nth_of_td1"\x3e\x3ca href\x3d"javascript:void(0)" title\x3d"'+h[r].title+'"\x3e'+h[r].title+'\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"nth_of_td2"\x3e\x3ca href\x3d"javascript:void(0)" title\x3d"'+h[r].description+'"\x3e'+h[r].description+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+w+"\x3c/td\x3e\x3ctd "+m+"\x3e"+v+g+"\x3c/td\x3e\x3c/tr\x3e");null!==p&&(a(".super_saver").show(),a(".via").show(),a(".shipmentStarts").show(),q='class\x3d"pricelab" usvalue\x3d"'+p.price+'"',g=switchPrice(p.price,t),0==p.price?(a(".navFreeshipping").show(),q="",d.fee=strFun("TT_language_"+jsLanguage)["tomtop.shippingmethod.freeshipping"]):(a(".navFreeshipping").hide(),d.fee=u+g),d.title=p.title,a(".logistics_info").find(".shipmentStarts").text(p.description));a(".logistics_info").children(".shipping").html("\x3cb "+q+"\x3e"+d.fee+"\x3c/b\x3e");a(".logistics_info").find(".super_saver").html(d.title);b||(b='\x3ctr\x3e\x3ctd colspan\x3d"4"\x3eSorry,this is no shipping available here.\x3c/td\x3e\x3c/tr\x3e');this.box.find(".method_table").children("tbody").html(b);this.box.find(".newshopping_address").show();this.insertCountry(f)}a(".logistics_loading").hide();a(".logistics_info").show()},bindEvent:function(){var c=this;a("body").on("click",".dialogs_c .all_country li",function(){var b=a(this).children("em").attr("data");b!=c.country&&(c.changeCountry(b),c.getShippingData({}))});a(".logistics").on("click",".super_saver,em.state,em.via",function(){var c=a("#whouse").val(),b=a("#wearhouseList").children(".selectActive").attr("title");fnDialogsBg();a(".logistics_c").addClass("dialogs_show");a(".stock_in").children("span").removeClass().addClass("flag_"+c);a(".stock_in").children("em").text(b)});a(".loading_defeated").click(function(){c.getShippingData({reRequest:!0})});a("body").on("click",".method_table tr",function(){if(0==a(this).hasClass("heads")){var b=a(this).children(".nth_of_td2").children("a").text(),d=a(this).children(".nth_of_td1").children("a").text(),h=currencyLabel[c.getRealCurrency()],f=currencyRate[c.getRealCurrency()],f=switchPrice(a(this).data("usval"),f);0==a(this).hasClass("no_a")&&0==a(this).hasClass("no_b")&&(a(this).children().find("input").prop("checked",!0).parent().parent().siblings().children().find("input").prop("checked",!1),a(this).addClass("select").siblings().removeClass("select"),a(".shipmentStarts").text(b),0==a(this).data("usval")?a(".logistics_info").children(".shipping").html("\x3cb\x3e"+a(this).data("price")+"\x3c/b\x3e"):a(".logistics_info").children(".shipping").html('\x3cb class\x3d"pricelab" usvalue\x3d"'+a(this).data("usval")+'"\x3e'+h+f+"\x3c/b\x3e"),a(".logistics_info").children().children(".super_saver").html(d),a(".logistics_c").removeClass("dialogs_show"),fnDialogsBg())}})},insertCountry:function(c){for(var b=a(".logistics_c").find(".all_country"),d="",h=0,f=c.length;h<f;h++)var g=c[h].code,d=d+('\x3cli class\x3d"'+g+'"\x3e\x3ci\x3e\x3c/i\x3e\x3cem data\x3d"'+g+'"\x3e'+c[h].cname+"\x3c/em\x3e\x3c/li\x3e");b.html(d)},run:function(){this.init();this.bindEvent()}};b.describeImgs={insert:function(){for(var c=mainContent,e=a("#productSku").val(),d=c.length,h=a("#descriptionImg"),f="",g=0;g<d;g++)c[g].sku==e&&(f=c[g].imgList);c=f.length;if("de"!=TT_NS.lactions.langShort()&&"it"!=TT_NS.lactions.langShort()&&"es"!=TT_NS.lactions.langShort())for(g=0;g<c;g++)1==f[g].isDetails&&h.append('\x3cimg style\x3d"min-height:300px;" class\x3d"lazy" src\x3d"'+TT_CONFIG.staticUrl+'/icon/placeholder.gif" data-original\x3d"'+b.config.url2000+f[g].imgUrl+'"\x3e')}};b.askQuestion={errorClass:"errorClass",init:function(){var c=this,b=a("#selectQuestion"),d=a("#askQuestion").find("input[type\x3dtext],textarea");a(".popAQ").on("click",function(){c.showAndMask("","popup_Warp");c.checkInput()});a("#questionSub").click(function(){a.each(d,function(){""==a(this).val()&&a(this).siblings(".warn").addClass(c.errorClass).text(a(this).attr("tips"))});"0"==b.children("option:selected").val()&&b.siblings(".warn").addClass(c.errorClass).text(b.attr("tips"));if(0==a(".errorClass").length){var e=a(".qaSku").val(),f=a("#askQuestion"),g=f.find(".qaEmail").val(),l=f.find(".qaName").val(),p=f.find(".qaCode").val(),n=f.find(".qaQuestionType").val(),k=f.find(".qaQuestionContent").val();a.post(domain+"index.php?r\x3dqa/default/add",{sku:e,email:g,name:l,code:p,questionType:n,questionContent:k},function(b){1==b.status?(c.success(),a(".codeInput").siblings("img").click(),f.find("input,textarea").val("")):(a(".returnWarn").text(b.errorMessage),a(".codeInput").siblings("img").click())},"json")}});b.change(function(){"questionType"!=a(this).children("option:selected").val()&&a(this).siblings(".warn").removeClass(c.errorClass).text("")})},showAndMask:function(c,b){a("."+b).show();a('\x3cdiv class\x3d"promptMask"\x3e\x3c/div\x3e').appendTo(a("body"));a(".icon-Close,.promptMask").on("click",function(c){a("."+b).hide();a(".promptMask").remove();c.stopPropagation()});a("."+b).find("a[data-tag\x3dok]").click(c)},checkInput:function(){var c=this,b=a("#askQuestion");b.find("input[type\x3dtext],textarea").blur(function(){""==a(this).val()&&a(this).siblings(".warn").addClass(c.errorClass).text(a(this).attr("tips"))});b.find("input[name\x3demail]").blur(function(){var b=a(this).val();""!=b&&((isok=reg.test(b))||a(this).siblings(".warn").addClass(c.errorClass).text(strFun("TT_language_"+jsLanguage)["tomtop.message.wrongEmail"]))});b.find("textarea").keydown(function(){var c=a(this).val();3E3<=c.length&&a(this).val(c.substring(0,2999))});b.find("textarea").keyup(function(){var c=3E3-a(this).val().length;a(this).siblings(".tip").children("em").text(c)});b.find("input[type\x3dtext],textarea").focus(function(){a(this).siblings(".warn").text("").removeClass(c.errorClass)})},success:function(){a(".popup_Warp").hide();a(".popup_Warp_Success").show();a(".icon-Close,.promptMask,.popup_Warp_Success .btn-orange").on("click",function(c){a(".popup_Warp_Success").hide();a(".promptMask").remove();c.stopPropagation();window.location.href=location})}};b.upload={uploadimg:function(a,b,d){var c=jQuery,e=c(b),g=window.devicePixelRatio||1,l=100*g,p=100*g,n;n=WebUploader.create({auto:!0,swf:"Uploader.swf",server:d,pick:a,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"},thumb:{width:170,height:150,quality:70,allowMagnify:!1,crop:!0,type:"image/jpeg"},compress:{width:800,height:800,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0,noCompressIfLarger:!1,compressSize:10},fileNumLimit:5,fileSizeLimit:262144E3,fileSingleSizeLimit:52428800});n.on("fileQueued",function(b){var d=c('\x3cli id\x3d"'+b.id+'" class\x3d"diyUploadHover"\x3e\x3cinput type\x3d"hidden" class\x3d"input_img" name\x3d"imgs[]" value\x3d"" /\x3e\x3cinput type\x3d"hidden" class\x3d"upload_status" name\x3d"upload_status[]" value\x3d"0" /\x3e\x3cdiv class\x3d"viewThumb"\x3e\x3ca\x3e\x3cimg\x3e\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"diyCancel"\x3e\x3c/div\x3e\x3cdiv class\x3d"diySuccess"\x3e\x3c/div\x3e\x3cdiv class\x3d"diySuccess"\x3e\x3c/div\x3e\x3cdiv class\x3d"diyFileName"\x3e'+b.name+"\x3c/div\x3e\x3c/li\x3e"),f=d.find("img");e.append(d);n.makeThumb(b,function(a,c){a?f.replaceWith("\x3cspan\x3e\u4e0d\u80fd\u9884\u89c8\x3c/span\x3e"):f.attr("src","//static.tomtop.com/tomtop/icon/loading.gif")},l,p);10<c(a).parent().children().length&&(c(a).hide(),10<c(".diyUploadHover").length&&c(".diyUploadHover :gt(9)").remove())});c(".addPic_Box").on("click",".diyCancel",function(){var b=c(this).parent().length,e=c(this).parent().find(".webuploader-element-invisible");c(this).parent("li").remove();10>b&&(e.removeAttr("disabled"),c(a).show())});c(b).on("click",a,function(){var a=c(this).children().find(".webuploader-element-invisible"),b=c(this).siblings(".diyUploadHover").length;a.removeAttr("disabled");a.show();10<=b&&(a.attr("disabled","disabled"),a.hide())});n.on("uploadProgress",function(a,b){var e=c("#"+a.id);e.find(".viewThumb img").length||c('\x3cp class\x3d"progress"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/p\x3e').appendTo(e).find("span")});n.on("uploadSuccess",function(a,b){1==b.status?(c("#"+a.id).find(".input_img").val(b.imgurl),c("#"+a.id).find(".upload_status").val(1),c("#"+a.id).find(".viewThumb img").attr("src",b.imgurl)):c("#"+a.id).remove();c("#"+a.id).addClass("upload-state-done")});n.on("uploadError",function(a){a=c("#"+a.id);var b=a.find("div.error");b.length||(b=c('\x3cdiv class\x3d"error"\x3e\x3c/div\x3e').appendTo(a));b.text("\u4e0a\u4f20\u5931\u8d25")});n.on("uploadComplete",function(a){c("#"+a.id).find(".progress").remove()})},init:function(){a(".addPic").each(function(){var c=a(this).attr("id"),b=a(this).data("resultid");TT_NS.upload.uploadimg("#"+c,"#"+b,TT_NS.config.domain+"index.php?r\x3dreview/default/uploadimg")})}};b.commit={scroll:function(c){function b(b){var e=b-c.min_picnum+2,d=-e*p;1==c.mindire?(a(c.pnum).find("ul li").css("float","left"),l>c.min_picnum&&(3>b&&(d=0),b==l-1&&(d=-(e-1)*p),a(c.pnum).find("ul").stop().animate({left:d},c.delayTime))):a(c.pnum).find("ul li").css("float","none")}function d(b){var e=-b*f;1==c.picdire&&(a(c.pic).find("ul li").css("float","left"),a(c.pic).find("ul").stop().animate({left:e},c.delayTime));a(c.pic).find("ul li").eq(b).fadeIn(c.delayTime).siblings("li").fadeOut(c.delayTime);a(c.pnum).find("li").eq(b).addClass("cpActive").siblings(this).removeClass("cpActive");jsonreview=a(c.pnum).find("li").eq(b).data("json");b='\x3cspan\x3e\x3ca href\x3d"#"\x3e\x3cimg src\x3d"'+jsonreview.headImage+'"\x3e\x3c/a\x3e '+jsonreview.account+'\x3c/span\x3e\x3cp title\x3d"'+jsonreview.comment+'"\x3e'+jsonreview.comment+"\x3c/p\x3e";a("#customer_reviewInfo").html(b)}c=a.extend({pic:null,pnum:null,prev_btn:null,next_btn:null,prev:null,next:null,delayTime:800,order:0,picdire:!0,mindire:!1,min_picnum:null},c||{});var h=a(c.pic).find("ul li").length,f=a(c.pic).find("ul li").outerWidth(!0),g=a(c.pic).find("ul li").outerHeight(!0),l=a(c.pnum).find("ul li").length,p=a(c.pnum).find("ul li").outerWidth(!0),n=a(c.pnum).find("ul li").outerHeight(!0),k=0,m=0;a(c.pic).find("ul").width(h*f).height(h*g);a(c.pnum).find("ul").width(l*p).height(l*n);a("body").on("click","#ban_num ul li",function(){a(this).attr("src");var b=a(this).data("index"),e=a(c.pnum).find("li").eq(b),d=a(this).data("json"),d='\x3cspan\x3e\x3ca href\x3d"#"\x3e\x3cimg src\x3d"'+d.headImage+'"\x3e\x3c/a\x3e '+d.account+'\x3c/span\x3e\x3cp title\x3d"'+d.comment+'"\x3e'+d.comment+"\x3c/p\x3e";a(c.pic).find("ul li").eq(b).fadeIn(c.delayTime).siblings("li").fadeOut(c.delayTime);e.addClass("cpActive").siblings(this).removeClass("cpActive");k=m=b;a("#customer_reviewInfo").html(d);return!1});a("body").on("click",c.prev_btn,function(){h=a(".pic_list").find("ul li").length;0==k&&(k=h,currentPage=parseInt(a("#currentPage").val()),1<currentPage&&TT_NS.commit.showdetail(0,0,currentPage-1));0==m&&(m=h);m--;k--;d(k);b(m)});a("body").on("click",c.next_btn,function(){h=a(".pic_list").find("ul li").length;k==h-1&&(k=-1,currentPage=parseInt(a("#currentPage").val()),totalPage=parseInt(a("#totalPage").val()),currentPage<totalPage&&TT_NS.commit.showdetail(0,0,currentPage+1));m==l-1&&(m=-1);m++;b(m);k++;d(k)});a("body").on("click",c.prev,function(){h=a(".pic_list").find("ul li").length;0==k&&(k=h);0==m&&(m=h);m--;k--;d(k);b(m)});a("body").on("click",c.next,function(){h=a(".pic_list").find("ul li").length;k==h-1&&(k=-1);m==l-1&&(m=-1);m++;b(m);k++;d(k)})},init:function(){TT_NS.commit.scroll({pic:"#ban_pic",pnum:"#ban_num",prev_btn:"#prev_btn",next_btn:"#next_btn",prev:"#prev",next:"#next",delayTime:400,pop_delayTime:400,order:0,picdire:!0,mindire:!1,min_picnum:5});1==a(".navFixedTop").length&&a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+"index.php?r\x3dreview/default/ajaximgandvideolist\x26spu\x3d"+product.spu+"\x26sku\x3d"+product.url+TT_NS.lactions.lang(),dataType:"html",success:function(c){a("#reviewImgAndVideo").html(c);a("#review_imglist .moveHidden").carousel({_height:"",_leftBtnShow:"on",_leftClass:"leftArr",_rightClass:"rightArr"});a("#review_videolist .moveHidden").carousel({_height:"",_leftBtnShow:"on",_leftClass:"leftArr",_rightClass:"rightArr"});a('.vdlist a[data-rel\x3d"lightcase:example_group"]').lightcase({iframe:{width:800,height:450,frameborder:0}});return!1}});a("body").on("click",".piclist li",function(){var c=a(this).data("imgid"),b=a(this).data("index");TT_NS.commit.showdetail(c,b,1);a("#procuctPOP1").fadeIn();return!1});a("body").on("click",".close,.black",function(){a("#procuctPOP1").fadeOut()});a("body").on("click",".writePic a",function(){a(this).lightcase({iframe:{width:800,height:450,frameborder:0}});return!1});a(".reviewsHelpfu .yes").bind("click",function(){1==a("#logout").length&&(a(this).unbind("click"),a(this).parent().next().find(".no").unbind("click"));var c=a(this);TT_NS.commit.isuserful(c,1)});a(".reviewsHelpfu .no").bind("click",function(){1==a("#logout").length&&(a(this).unbind("click"),a(this).parent().prev().find(".yes").unbind("click"));var c=a(this);TT_NS.commit.isuserful(c,-1)});a(".impress").on("click","li",function(){a(this).hasClass("selectActive")?a(this).removeClass("selectActive"):a(this).addClass("selectActive");labels="";a(".impress li").each(function(){a(this).hasClass("selectActive")&&(labels+=a(this).data("id")+",")});labels=labels.substring(0,labels.length-1);a(".impress").find("input").val(labels)});a("#ccomment").bind("focus keyup input paste",function(){var c=a.trim(a(this).val()).length;20>c?a(this).siblings("p").show().find("b").text(20-c):a(this).siblings("p").hide()});a("body").on("click",".add",function(){5>a(this).parent().parent().children("p").length&&a(this).parent().parent().prepend('\x3cp\x3e\x3cinput type\x3d"text" autocomplete\x3d"off" name\x3d"commentVideoUrl[]" placeholder\x3d"Paste Your YouTube Video URL"\x3e\x3cinput type\x3d"button" class\x3d"btn sub"\x3e\x3c/p\x3e')});a("body").on("click",".sub",function(){a(this).parent().remove()});a("body").on("click",".all_sub",function(){a(this).parent().siblings("p").remove()});a("body").on("click",".addreview",function(){url="addreview";func="ajaxispermitadd";TT_NS.commit.ispermit(a(this),url,func)});a("body").on("click",".postreivew",function(){url="appendreview";func="ajaxispermitappend";TT_NS.commit.ispermit(a(this),url,func)})},showdetail:function(c,b,d){var e=a("#spu").val();a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+"index.php?r\x3dreview/default/ajaximgzoom\x26spu\x3d"+e+"\x26imgId\x3d"+c+"\x26imgindex\x3d"+b+"\x26page\x3d"+d,dataType:"html",success:function(c){a("#procuctPOP1").html(c);a("#ban_pic").find("ul li").eq(b).fadeIn(5).siblings("li").fadeOut(5)}})},isuserful:function(c,b){if(null!=TT_NS.cookie.get("LOGIN_TOKEN")){var d=c.data("id");a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+"index.php?r\x3dreview/default/ajaxselectisuseful\x26isuserful\x3d"+b+"\x26commentId\x3d"+d,dataType:"json",success:function(a){1==a.status&&(stradd=c.parent().text(),strnum=stradd.replace(/[^0-9]/ig,""),c.next("em").text(Number(strnum)+1),c.parent().addClass("good"))}})}else TT_NS.cookie.tem("TT_REDIRECT_URL",window.location.href),window.location.href=TT_CONFIG.loginUrl},ispermit:function(c,b,d){if(null!=TT_NS.cookie.get("LOGIN_TOKEN")){var e=a("#listingId").val();a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+"index.php?r\x3dreview/default/"+d+"\x26listingId\x3d"+e,dataType:"json",success:function(d){if(1==d.status){sku=c.data("url");var f="";"undefined"!=d.orderId&&(f="\x26orderid\x3d"+d.orderId);window.location.href=TT_CONFIG.domain+sku+"/"+b+".html?listingId\x3d"+e+f}else Dialog(function(){a(".pu_pop").fadeOut(function(){a(this).remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],d.msg)}})}else TT_NS.cookie.tem("TT_REDIRECT_URL",window.location.href),window.location.href=TT_CONFIG.loginUrl}};b.featured={selected:null,init:function(){var c=this;a(".selectAttribute").height();a("#d_origprice").attr("usvalue");a("#detailPrice").attr("usvalue");a("body").on("click",".checkSelect",function(){var b=a(this).parents("li").attr("id");a("#fBox_Box").find(".multiAci");defaultMap=a(this).data("map");var d=a(this).children(".multi-select");d.hasClass("multiAci")?d.prop("class","multi-select lineBlock"):(c.attributeMap(b,defaultMap),c.closeAttr(b),d.addClass("multiAci"),1==a(this).children(".multiAci").length&&0==a.isEmptyObject(defaultMap)&&1<freeContent[b].length&&(a(".c_detail").show().attr("data_spu",b),a(".mask").show()));c.prices();return!1});a("body").on("click",".confirm",function(){a(".c_detail").hide();a(".mask").hide()});a("body").on("click",".close,.cancel,.mask",function(){var b=a(".c_detail").attr("data_spu");a("#"+b).children().children(".multi-select").removeClass("multiAci");c.prices();a(".c_detail").hide();a(".mask").hide()});a("body").on("click",".selectAttributes li",function(){var b=a(this).parents(".c_detail").attr("data_spu"),d=a(this).parents(".item_box").prev(".proColor"),h=d.children("span").attr("data_key"),f=a(this).attr("data-attr-value");a(this).not(".invalids").addClass("selectActive").siblings().removeClass("selectActive");c.closeAttr(b,h);c.prices();d.children("span").children("b").text(f)});a("body").on("click","div.com_select li",function(){a("div.com_select li").removeClass("active");a(this).addClass("active");a(".comboDealWarp ").hide();var c=a(this).data("href");a(c).fadeIn();return!1})},prices:function(){for(var c=0,b=null==TT_NS.cookie.get("TT_CURR")?"USD":TT_NS.cookie.get("TT_CURR"),d=a("#fBox_Box").find(".multiAci"),h=Number(a("#detailPrice").attr("usvalue")),h=switchPrice(h,filterAttr.rate()),f=filterAttr.label(),g=0,l=d.length;g<l;g++)var p=Number(d.eq(g).siblings(".freeProductPrice").attr("usvalue")),p=switchPrice(p,filterAttr.rate()),c=c+Number(p);c=parseFloat(c)+parseFloat(h);c="JPY"==b?Math.round(c):c.toFixed(2);a("#totalPrice").text(f+c)},fixedPrice:function(){var c=filterAttr.label(),b=0,d=0;a(".oldGroupPrice").each(function(){var d=0,e=0;a(this).parents().filter(".BoughtTogether").find(".productClass").each(function(){0<a(this).find(".productCost").length?(d+=parseFloat(a(this).find(".productCost").attr("usvalue")),e+=parseFloat(a(this).find(".productCost").text().replace(c,""))):(d+=parseFloat(a(this).find(".productPrice").attr("usvalue")),e+=parseFloat(a(this).find(".productPrice ").text().replace(c,"")))});b="JPY"==filterAttr.currency()?Math.round(e):parseFloat(e).toFixed(2);a(this).attr("usvalue",d.toFixed(2)).text(c+b)});a(".packagePrice").each(function(){var b=0,e=0;a(this).parents().filter(".BoughtTogether").find(".productClass").each(function(){b+=parseFloat(a(this).find(".productPrice").attr("usvalue"));e+=parseFloat(a(this).find(".productPrice").text().replace(c,""))});d="JPY"==filterAttr.currency()?Math.round(e):parseFloat(e).toFixed(2);a(this).attr("usvalue",b.toFixed(2)).text(c+d)});a(".packagePriceRate").each(function(){var b,d;d=a(this).parents(".comboPrice");b=parseFloat(d.find(".oldGroupPrice").text().replace(c,""));d=parseFloat(d.find(".packagePrice").text().replace(c,""));var e="JPY"==filterAttr.currency()?Math.round(b-d):parseFloat(b-d).toFixed(2);a(this).attr("usvalue",parseFloat(e/filterAttr.rate()).toFixed(2)).text(c+e);rate=Math.ceil(100-d/b*100);a(this).siblings(".freeRate").text(rate)})},bundlingFree:function(){var c=this,b=a("#listingId").val(),d=a("#storageid").val(),h=a("#productStatus").val();a("#productSku").val();""==b?a("#bundLing").hide():(a("#bundLing").show(),a.ajax({type:"GET",cache:!1,url:domain+"index.php?r\x3ddetails/activity/ajaxbundlingfree\x26listingId\x3d"+b+"\x26depotId\x3d"+d+"\x26status\x3d"+h+"\x26currency\x3dUSD"+TT_NS.lactions.lang(),dataType:"html",success:function(d){a("#bundLing").html(d);0<a("#fBox_Box").length&&a("#fBox_Box .moveHidden").carousel({_height:"",_leftClass:"leftArr",_rightClass:"rightArr"});if(0<a("#fBox_AlsoBoughtFixed1").length){d=1;for(var e=a("#RecommendedItems").children(".BoughtTogether").length;d<=e;d++)a("#fBox_AlsoBoughtFixed .moveHidden").carousel({_height:"",_leftClass:"leftArr",_rightClass:"rightArr"});0==a("#fBox_Box").length&&a(".recommendedItems").addClass("active")}var f=0;d=filterAttr.label();var e=a("#whouse").val()||"CN",h="",n;for(n in mainContent)if(mainContent[n].listingId==b){carrprod=a(".currentProduct");var h=mainContent[n].whouse[e],k=Math.ceil(100-Number(a("#detailPrice").text())/parseFloat(a("#d_origprice").text().match(/\d+/g))*100);price=switchPrice(h.us_origprice,filterAttr.rate());sale_price=switchPrice(Number(a("#detailPrice").attr("usvalue")),filterAttr.rate());h.nowprice==h.origprice?(carrprod.find(".icon-sale").hide(),carrprod.find(".productCost").hide()):carrprod.find(".icon-sale").show().html(k);var m=mainContent[n].imgList,q;for(q in m)1==m[q].isMain&&carrprod.find("img").attr("src",url168+m[q].imgUrl);carrprod.find("a").attr("href",domain+mainContent[n].url+".html");carrprod.find(".productTitle").html(mainContent[n].title);carrprod.find(".icon_sale span").html("\x3cem\x3e"+k+"\x3c/em\x3e%\x3ci\x3eOFF\x3c/i\x3e");carrprod.find(".productCost").text(d+price);carrprod.find(".productPrice").text(d+sale_price);carrprod.find(".productCost").attr("usvalue",filterAttr.us_origprices());carrprod.find(".productPrice").attr("usvalue",filterAttr.us_nowprices())}a(".freeProductPrice").each(function(){f+=parseFloat(a(this).attr("usvalue"))});"undefined"!=typeof sale_price&&(a("#totalPrice").text(d+sale_price),a("#totalPrice").attr("usvalue",h.us_nowprice));c.fixedPrice();switchTab(".xxkClick",".xxkBox","active");c.selectAddToCart();c.itemsAddToCart()},error:function(){}}))},attributeMap:function(c,b){var d=mapList[c],e=colorImg[c],f=freeContent[c],g;for(g in f){var l=f[g].attributeMap,p;for(p in l){var n=l[p];-1==d[p].indexOf(n)&&d[p].push(n)}}a(".c_detail").html('\x3ch2\x3e\x3ci class\x3d"close"\x3e\x3c/i\x3e\x3c/h2\x3e');var f="",k;for(k in d){defmapval=0==b.length?"":b[k];var f=f+('\x3cp class\x3d"proColor"\x3e\x3cspan data_key\x3d"'+k+'"\x3e'+k+":\x3cb\x3e"+defmapval+"\x3c/b\x3e\x3c/span\x3e\x3c/p\x3e"),f="color"==k?f+'\x3cdiv class\x3d"item_box"\x3e\x3cul class\x3d"selectAttributes lbUl selectColor"\x3e':f+'\x3cdiv class\x3d"item_box"\x3e\x3cul class\x3d"selectAttributes lbUl"\x3e',m;for(m in d[k])f="color"==k?defmapval==d[k][m]?f+('\x3cli data-attr-value\x3d"'+d[k][m]+'" class\x3d"selectActive"\x3e\x3ci\x3e\x3c/i\x3e\x3cimg src\x3d"'+e[d[k][m]]+'"\x3e\x3c/li\x3e'):f+('\x3cli data-attr-value\x3d"'+d[k][m]+'" class\x3d""\x3e\x3ci\x3e\x3c/i\x3e\x3cimg src\x3d"'+e[d[k][m]]+'"\x3e\x3c/li\x3e'):defmapval==d[k][m]?f+('\x3cli data-attr-value\x3d"'+d[k][m]+'" class\x3d"selectActive"\x3e\x3ci\x3e\x3c/i\x3e'+d[k][m]+"\x3c/li\x3e"):f+('\x3cli data-attr-value\x3d"'+d[k][m]+'" class\x3d""\x3e\x3ci\x3e\x3c/i\x3e'+d[k][m]+"\x3c/li\x3e");f+="\x3c/ul\x3e\x3c/div\x3e"}f+='\x3cp\x3e\x3ca class\x3d"cancel btn"\x3ecancel\x3c/a\x3e\x3ca class\x3d"confirm btn btn-orange"\x3eok\x3c/a\x3e\x3c/p\x3e';a(".c_detail").find("h2").after(f)},closeAttr:function(c,b){var d=filterAttr,e=a(".selectAttributes");this.filterSku(e,c);for(var f=0;f<e.length;f++){var g=e.eq(f).parents(".item_box").prev(".proColor").find("span").attr("data_key"),l=e.eq(f).find("li");if(g!=(void 0==b?"":b)){for(var p=[],n=freeContent[c],k=0;k<n.length;k++)n[k].isDel=0,p.push(n[k]);for(k=0;k<d.selected.length;k++){var m=d.selected[k].attr_name,q=d.selected[k].attr_value;if(m!=g)for(var t in n){var u=!1,v=n[t].whouse,w=n[t].attributeMap;if("whouse"==m)for(var r in v)r==q&&(u=!0);else for(var x in w)m==x&&q==w[x]&&(u=!0);u||(p[t].isDel=1)}}for(g=0;g<l.length;g++)n=l.eq(g),k=n.parents(".item_box").prev(".proColor").find("span").attr("data_key"),d.forbidSelect(n,p,k,!0)}}},filterSku:function(a,b){var c=0,e=filterAttr,f=freeContent[b];curr_list=null;curr_list=[];e.getAttrValue(a);for(var g=0;g<f.length;g++){for(var l=0,p=0;p<e.selected.length;p++){var n=e.selected[p].attr_name,k=e.selected[p].attr_value,m=f[g].attributeMap,q;for(q in m)if(q==n&&m[q]==k){l++;break}}l==p&&(c++,curr_list.push(f[g]))}1==c&&(curr_sku=curr_list[0],this.price(b,curr_sku))},price:function(c,b){var d=filterAttr,e=d.label(),f=d.rate(),g=a("#"+c),d=g.find(".productCost"),l=g.find(".freeProductPrice"),p=g.find(".free_listingid"),n=g.find(".productImg").children(),g=g.children(".icon-sale"),k=b.us_origprice,m=b.us_nowprice;null==TT_NS.cookie.get("TT_CURR")||TT_NS.cookie.get("TT_CURR");var q=switchPrice(k,f),f=switchPrice(m,f),t=Math.ceil(100-m/k*100);m==k?g.hide():g.show().text(t);d.attr("usvalue",k);l.attr("usvalue",m);d.text(e+q);l.text(e+f);p.val(b.listingId);n.attr("src",TT_NS.config.url168+b.imageUrl)},selectAddToCart:function(){a("#FeaturedProducts").find(".comboPrice").children("a").click(function(){for(var c=filterAttr,b=c.storageid(),d=c.listingId(),h=TT_NS.cookie.get("USERID_COOKIE_NAME"),d=[{listingid:d,qty:1,storageid:b,userid:h,website:1}],f=a("#FeaturedProducts").find(".multiAci"),g=0,l=f.length;g<l;g++)datas={listingid:f.eq(g).siblings(".free_listingid").val(),qty:1,storageid:b,userid:h,website:1},d.push(datas);c.cartAjax(d,"false")})},itemsAddToCart:function(){a(".comboDealWarp").find(".comboPrice").children("a").click(function(){var c=filterAttr,b=c.storageid(),d=TT_NS.cookie.get("USERID_COOKIE_NAME"),b=[{listingid:a(this).siblings("input[name\x3dpackageSku]").val(),qty:1,storageid:b,userid:d,website:1}];c.cartAjax(b,"false")})}};b.DetailsAjax={run:function(){a(".related_searches").on("click",".arrow_b",function(){var b=a(".keywordList"),e=a(this);"none"==b.css("display")?(b.fadeIn(),e.addClass("arrrow_bd")):(b.fadeOut(),e.removeClass("arrrow_bd"))})}};b.SpecialDeals={init:function(){var b=this;a(".m_email_pop .emailSend").on("click",function(){a(this).attr("disabled","").addClass("invalid");b.sendactivateEmail()});a(".m_email_pop .close_pop,.pu_popBlack").on("click",function(){a(".m_email_pop").addClass("hide")})},sendactivateEmail:function(){a(".tip_err").addClass("hide");a.ajax({url:domain+"index.php?r\x3dmember/default/useractivate",timeout:1E4,type:"get",dataType:"json",success:function(b){if(1==b.status){var c=null,d=60;a(".tip_mess").removeClass("hide");a(".tip_mess").find("span").removeClass("hide");a(".tip_mess").find("em").html(d);c=setInterval(function(){d--;a(".tip_mess").find("em").html(d);0>=d&&(clearInterval(c),a(".tip_mess").addClass("hide"),a(".tip_mess").find("span").addClass("hide"),a(".emailSend").removeAttr("disabled").removeClass("invalid"))},1E3)}else a(".tip_mess").after('\x3cspan class\x3d"tip_err"\x3e\x3c/span\x3e'),a(".tip_err").css({color:"#999",display:"block","margin-left":"10px","margin-top":"10px"}).text(b.msg)}})}};b.userLogin={type:null,init:function(){null!=TT_NS.cookie.get("LOGIN_TOKEN")?a(".share_mask").remove():a(".share_mask").click(function(){TT_NS.cookie.tem("TT_REDIRECT_URL",window.location.href);window.location.href=TT_CONFIG.loginUrl})},share:function(){function b(b){0<a("#shareOpen").size()&&(clearTimeout(e),e=setTimeout(function(){var c;TT_NS.cookie.get("TT_SNS")&&(c=TT_NS.cookie.get("TT_SNS").split(","),1==TT_NS.arr.isInArray(c,d.type)?(a(".share_success").removeClass("hide"),a(".share_sure,.share_error").addClass("hide")):(a(".share_sure").removeClass("hide"),a(".share_error,.share_success").addClass("hide")));fnDialogsBg("show");a(".m_share_check").addClass("dialogs_show").attr("data-share-type",b)},500))}var e=null,d=this,h={facebook:"",twitter:"",google_plusone_share:"",pinterest_share:"",vk:"",odnoklassniki_ru:""},f;for(f in h){var g=".at-svc-"+f;(function(c){a(document).on("click",g,function(){a(".share_sure,.share_error,.share_success").addClass("hide");"google_plusone_share"==c?c="google":"pinterest_share"==c?c="pinterest":"odnoklassniki_ru"==c&&(c="odnoklassniki");d.type=c;b(c);a(".share_sure").removeClass("hide")})})(f)}a(document).on("click",".shareYes",function(){a(".share_sure,.share_error,.share_success").addClass("hide");a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+"index.php?r\x3dlottery/default/pickupcoupon\x26channel\x3d"+d.type+TT_NS.lactions.lang(),dataType:"json",success:function(b){if(1==b.ret){var c=d.type;a(".share_sure").removeClass("hide");a(".m_share_check").removeClass("dialogs_show");a(".m_share").addClass("dialogs_show");a("#couponValule").text("$ "+b.data.subtractMoney);a("#pickUpCoupon").text("US $"+b.data.subtractMoney);TT_NS.cookie.get("TT_SNS")&&(c=TT_NS.cookie.get("TT_SNS").split(","),c.push(d.type));TT_NS.cookie.set("TT_SNS",c)}else 0==b.ret&&80004==b.errCode?(a(".share_success").removeClass("hide"),a(".share_sure,.share_error").addClass("hide")):(a(".share_error").removeClass("hide"),a(".share_sure,.share_success").addClass("hide"))}})});a(document).on("click",".shareNo",function(){a(".m_share_check").removeClass("dialogs_show");fnDialogsBg()})}};b.someClick={init:function(){var b=this,e=!1,d=!1,h=!1;a(".tab-shipping-payment").click(function(){0==e&&(e=!0,b.paymentAjax("index.php?r\x3ddetails/default/terms\x26type\x3dshipping-payment","shipping-payment"))});a(".tab-warranty").click(function(){0==d&&(d=!0,b.paymentAjax("index.php?r\x3ddetails/default/terms\x26type\x3dwarranty","warranty"))});a(".tab-wholesale").click(function(){if(0==h){h=!0;var c=a("#productSku").val();a.ajax({type:"GET",cache:!1,data:{sku:c},url:TT_NS.config.domain+"index.php?r\x3ddetails/default/wholesale"+TT_NS.lactions.lang(),dataType:"html",success:function(c){a("#wholesale").html(c);c=a("#listingId").val();var d=a("#productSku").val();a("#wholesale #wholesale_sku").val(d);a("#wholesale .wholesale_ListingId").val(c);getuser();b.wholesale();TT_NS.country.init()}})}})},paymentAjax:function(b,e){a.ajax({type:"GET",cache:!1,url:TT_NS.config.domain+b+TT_NS.lactions.lang(),dataType:"html",success:function(b){a("#"+e).html(b)}})},wholesale:function(){a("#Inquiry").find("input[name\x3dorderQuantity]").keyup(function(){var b=a(this).val();0==b?b="":b;a(this).val(b);this.value=this.value.replace(/[^0-9]/g,"")});a("#Inquiry").find(".textareas").keydown(function(){var b=a(this).val();4E3<=b.length&&a(this).val(b.substring(0,3999))});a("#Inquiry").find(".textareas").keyup(function(){var b=a(this).val();4E3<=b.length&&a(this).val(b.substring(0,3999))});a("#Inquiry").find("input[name\x3dtargetPrice]").on("keyup",function(b){var c=a(this);b=window.event||b;37==b.keyCode|39==b.keyCode||c.val(c.val().replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/\.{2,}/g,".").replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"))});a("#Inquiry").find("input[name\x3dmobilePhone]").keyup(function(){this.value=this.value.replace(/[^0-9]/g,"")});a(".m_wholesale_box").on("click",".item_submit .btn",function(){var b=/^(?!0{1,4})(\d{1,4}|10{4}|0)$|^[0-9]{1,4}\.[0-9]\d*$/,e=/^(?!0{1,6})(\d{1,6}|10{6}|0)$/,d=a(this).parents(".pu_pop"),h=a("#Inquiry").find("input[name\x3dtargetPrice]"),f=a("#Inquiry").find("input[name\x3demailAddress]"),g=a("#Inquiry").find("input[name\x3dorderQuantity]"),l=parseFloat(h.val());a("#Inquiry").find(".txtInp").each(function(){valInq=a(this).val();""==valInq&&(a(this).siblings(".warn").show(),a(this).siblings(".valwarn").hide(),a(this).parents("p").addClass("error"))});a("#Inquiry").find(".txtInp,.textareas").focus(function(){a(this).siblings(".warn").hide();a(this).parents("p").removeClass("error")});""==f.val()||reg.test(f.val())||(f.siblings(".valwarn").show(),f.parents("p").addClass("error"));""==h.val()||b.test(l)||(h.siblings(".valwarn").show(),h.parents("p").addClass("error"));""==g.val()||e.test(g.val())||(g.siblings(".valwarn").show(),g.parents("p").addClass("error"));""!=valInq&&0==a("#Inquiry").find(".error").length&&(jsonData=getFormJson(a("#Inquiry")),a("#listingId").val(),a("#productSku").val(),a.ajax({type:"post",url:TT_NS.config.domain+"index.php?r\x3ddetails/default/ajaxwholesale"+TT_NS.lactions.lang(),data:jsonData,success:function(b){1==b.status?(Dialog(function(){var b=a(this).parents(".pu_pop");b.fadeOut(function(){b.remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],"Your enquiry has been submitted and we will reply you within 24 hours."),d.fadeOut(function(){d.remove()}),a(".codeInput").siblings("img").click(),a(".wholesale_left").find(".txtInp,.textareas").val("")):(a(".codeInput").siblings(".warn").hide(),a(".codeInput").siblings(".valwarn").show().text(b.msg),a(".codeInput").siblings("img").click())},dataType:"json"}))})}};b.carouselEVens={init:function(){a(".showCaseSmall_box .moveHidden").carousel({_height:"",_upDown:"on",_leftBtnShow:"on",_leftClass:"showCaseL",_rightClass:"showCaseR"})},AlsoBought:function(){b.scrolTop.event(a("#AlsoBought"),function(){var c=a("#listingId").attr("value");a("#AlsoBought").append("\x3cdiv class\x3d'loading-ajax' /\x3e");var e=ajaxLang("index.php?r\x3ddetails/default/ajaxalsobought");a.ajax({type:"GET",cache:!1,url:e+TT_NS.lactions.lang(),data:"listingId\x3d"+c,dataType:"html",success:function(c){a("#AlsoBought").html(c);a("#AlsoBought img.lazy").lazyload();a(".loading-ajax").remove();b.scrolTop.btnEvent("#AlsoBought")}})})},AlsoViewed:function(){b.scrolTop.event(a("#AlsoViewed"),function(){var c=a("#productSku").attr("value");a("#AlsoViewed").append("\x3cdiv class\x3d'loading-ajax' /\x3e");var e=ajaxLang("index.php?r\x3ddetails/default/ajaxalsoviewed");a.ajax({type:"GET",cache:!1,url:e+TT_NS.lactions.lang(),data:"sku\x3d"+c,dataType:"html",success:function(c){a("#AlsoViewed").html(c);a("#AlsoViewed img.lazy").lazyload();a(".loading-ajax").remove();b.scrolTop.btnEvent("#AlsoViewed")}})})}};b.urlCookie={setCooke:function(){var c=request("uid"),e=request("activityCode"),d=a("#storageid").val();if(""!=c&&""!=request("Warehouse")&&""!=e){var h=a("#productSku").val(),f=a("#listingId").val();b.cookie.set("GET_IT_FREE",c+"|"+h+"|"+f+"|"+d+"|"+e,6048E5)}}};b.urlCookie.setCooke();b.carouselEVens.init();b.carouselEVens.AlsoBought();b.carouselEVens.AlsoViewed();b.userLogin.init();b.userLogin.share();return b}(window.TT_NS||{},jQuery);TT_GET("shipping").run();TT_GET("askQuestion").init();TT_GET("DetailsAjax").run();TT_GET("SpecialDeals").init();$(".selectColor").click(function(){$("#descriptionImg").html("");TT_NS.describeImgs.insert();$("img.lazy").lazyload()});TT_NS.commit.init();TT_NS.upload.init();TT_NS.someClick.init();TT_NS.arrivalNotice.arrivalNotice();function selectUurl(){var b=$("#showCaseSmallPic").find(".productSmallmove").children(".cpActive").index(),a=$("#smallClickUrl").children("li");a.removeClass("cpActive");a.eq(b).addClass("cpActive");b=$("#smallClickUrl").find(".cpActive").children("a").attr("href");$("#zoom2").attr("src",b);$("#zoom2").attr("href",b);$("#zoom2").children("img").attr("src",b)}$(function(){now=0;$(".browseLeft_clicks").parents(".scrollBox").siblings(".customerSmallmove").children("li");$(".browseLeft_clicks").siblings(".customer_popPicBox").find("img");$("#smallClickUrl").find("img").bind("click",function(){now=$(this).parents("li").index()});$(".hoverBig").children("li").click(function(b){var a=$("#zoom2"),c=$("#procuctPOP"),e=$("#bigBacks").find("img");b=a.find("img");var d=c.children(".customer_popBox");a.siblings(".cloud-img-loading").remove();c.fadeIn();a=$(".productSmallPic li.cpActive").index();$("#procuctPOP").ImgZoom({index:a});var a=$(window).width(),h=d.width();c.find(".scrollBox").css({width:h-238});var f=c.find(".scrollBox").width(),c=c.find(".scrollBox").height();1<=f/c?e.css({height:"100%",width:"auto"}):e.css({width:"100%",height:"auto"});e=b.height();c>e?b.css({top:"50%","margin-top":-e/2}):b.css({top:"0px","margin-top":"auto"});1900<=a?d.css({"margin-left":-500}):d.css({"margin-left":-h/2});b=$("#smallClickUrl").children("li");$("#smallClickUrl").height()<=b.length/3*(b.eq(0).height()+17)?$("#smallClickUrl").css({"overflow-y":"scroll",width:"215px"}):$("#smallClickUrl").css({"overflow-y":"hidden",width:"205px"})});$(".black").click(function(){$(this).parents(".blockPopup_box").fadeOut()})});$(window).resize(function(){$(".pu_popCon").height();$(".blockPopup_box").each(function(){if("block"==$(this).css("display")){var a=$(this).find(".scrollWZ").height()+30;$(this).find(".scrollWZ").css({"margin-top":-a/2})}});var b=$(window).width(),a=$("#procuctPOP").children(".customer_popBox").width();$("#procuctPOP").find(".scrollBox").css({width:a-238});var c=$("#procuctPOP").find(".scrollBox").width(),e=$("#procuctPOP").find(".scrollBox").height();1<=c/e?$("#bigBacks").find("img").css({height:"100%",width:"auto"}):$("#bigBacks").find("img").css({width:"100%",height:"auto"});c=$("#zoom2").find("img").height();e>c?$("#zoom2").find("img").css({top:"50%","margin-top":-c/2}):$("#zoom2").find("img").css({top:"0px","margin-top":"auto"});1900<=b?$("#procuctPOP").children(".customer_popBox").css({"margin-left":-500}):$("#procuctPOP").children(".customer_popBox").css({"margin-left":-a/2});b=$("#smallClickUrl").children("li");$("#smallClickUrl").height()<=b.length/3*(b.eq(0).height()+17)?$("#smallClickUrl").css({"overflow-y":"scroll",width:"215px"}):$("#smallClickUrl").css({"overflow-y":"hidden",width:"205px"})});$(function(){function b(){$(this).parents(".writePic").siblings(".writeAddPic").fadeIn();var c=$(this).index(),e=$(this).parent().next().find(".customer_bigPic li"),d=$(this).parents(".writePic").children("li").length,h=$(this).children("a").attr("data-rel");e.hide();e.eq(c).show();$(this).parent().next().find(".nowIndex:eq(0)").val(c);a=c;0==a?($(".AddPicLClick").hide(),$(".AddPicRClick").show()):a==d-1?($(".AddPicLClick").show(),$(".AddPicRClick").hide()):($(".AddPicLClick").show(),$(".AddPicRClick").show());1==d&&($(".AddPicLClick").hide(),$(".AddPicRClick").hide());return h?($(this).unbind("click",b).children("a").trigger("click"),$(".writeAddPic").hide(),$(this).children("a").trigger("click")):!1}var a=0;$(".writePic li").bind("click",b);$(".AddPicRClick").click(function(){var b=$(this).siblings(".customer_bigPic").children("li");a++;a>=b.length-1&&(a=b.length-1,$(this).hide());b.hide();b.eq(a).fadeIn();$(".AddPicLClick").show()});$(".AddPicLClick").click(function(){var b=$(this).siblings(".customer_bigPic").children("li");a--;0>=a&&(a=0,$(this).hide());b.hide();b.eq(a).fadeIn();$(".AddPicRClick").show()})});$(window).scroll(function(){720<$(window).scrollTop()?$(".navFixedTop").slideDown(200):$(".navFixedTop").slideUp(200)});$(function(){function b(){var a=$("#spu").val();$.ajax({type:"GET",cache:!1,url:domain+"index.php?r\x3ddetails/default/favorites\x26spu\x3d"+a+TT_NS.lactions.lang(),dataType:"json",success:function(a){1==a.status&&$(".heartNumber").html("("+a.client+")")}})}function a(){var a=$("#listingId").val();$.ajax({type:"GET",cache:!1,url:domain+"index.php?r\x3ddetails/default/collect\x26listingId\x3d"+a+TT_NS.lactions.lang(),dataType:"json",success:function(a){1==a.status&&$(".favoritesC").children(".icon_wishlist").addClass("icon_wishlists").removeClass("icon_wishlist")}})}1==$(".navFixedTop").length&&(a(),b())});var reg=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;function inputs(){$("#priceAlert").find(".txtInp,.textareas").each(function(){$(this).blur(function(){var b=$(this).val(),a=$("#priceAlert").find(".email").val();""==b?($(this).siblings(".help-inline").text(strFun("TT_language_"+jsLanguage)["tomtop.message.cannotBeEmpty"]),$(this).parents(".control-group").addClass("error")):($(this).siblings(".help-inline").text(""),$(this).parents(".control-group").removeClass("error"),$(this).parents(".control-group").addClass("success"));""!=a&&(isok=reg.test(a),isok||($("#priceAlert").find(".email").parents(".control-group").removeClass("success"),$("#priceAlert").find(".email").parents(".control-group").addClass("error"),$("#priceAlert").find(".email").siblings(".help-inline").text(strFun("TT_language_"+jsLanguage)["tomtop.message.wrongEmail"])))});$(this).focus(function(){$(this).siblings(".help-inline").text("");$(this).parents(".control-group").removeClass("error")});$("#targetPrice").keyup(function(){this.value=this.value.replace(/[^\d.]/g,"")})})}function ajaxSubmit(b,a){var c=getFormJson(b);$.ajax({url:b.action+TT_NS.lactions.lang(),type:b.method,data:c,success:a})}function getFormJson(b){var a={};b=$(b).serializeArray();$.each(b,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});return a}window.onload=function(){resizeIframe()};var resizeIframe=function(){for(var b=0;b<=document.getElementsByTagName("iframe").length;b++)try{document.getElementsByTagName("iframe")[b].height=531.5625}catch(a){}};$(function(){$(".emailSend").click(function(){filterAttr.sendactivateEmail()})});presell={init:function(){var b=$(".m_presale .grade li"),a=b.length,c=/\/|-/,c=c.test($(".progress").attr("data"));TT_NS.flashdeals.init();if(c){for(var c=/-/g,e=0;e<a;e++){var d=b.eq(e).attr("data"),d=d.replace(c,"/"),d=1E3*(new Date(d)).getTime();b.eq(e).attr("data",d)}d=$(".progress").attr("data");d=d.replace(c,"/");c=1E3*(new Date(d)).getTime();$(".progress").attr("data",c)}b.width(100/(a-1)+"%");for(var h,c=0,d=$(".progress").attr("data"),f=!0,e=0;e<a;e++)h=b.eq(e).attr("data"),h=parseFloat(h),d>=h&&(b.eq(e).addClass("exceed"),++c),d==h&&(f=!1);e=b.eq(1).width();h=e*(c-1);c<a&f&&(f=b.eq(c-1).attr("data"),f=parseFloat(f),b=b.eq(c).attr("data"),b=parseFloat(b),h=(d-f)/(b-f)*e+h);(0==h||2==c&2==a)&&++h;$(".progress").width(Math.ceil(h));100>h?$(".progress").find("span").addClass("unusual"):$(".progress").find("span").removeClass("unusual")}};$(function(){$(document).on("mouseover",".product_Reviews em",function(){var b=$(this).index()+1;$(this).parents(".product_Reviews").addClass("startH"+b)});$(document).on("mouseleave",".product_Reviews em",function(){var b=$(this).index()+1;$(this).parents(".product_Reviews").removeClass("startH"+b)});$(document).on("click",".product_Reviews em",function(){var b=$(this).index()+1;if(0<$(this).parents(".product_Reviews").attr("class").indexOf("start")){var a=$(this).parents(".product_Reviews").attr("class").indexOf("start"),a=$(this).parents(".product_Reviews").attr("class").substr(a,6);$(this).parents(".product_Reviews").removeClass(a)}$(this).parents(".product_Reviews").addClass("start"+b);$(this).parents(".product_Reviews").siblings("input").val(b);var b=parseInt($("input[name\x3d'ipriceStarWidth']").val()),a=parseInt($("input[name\x3d'iqualityStarWidth']").val()),c=parseInt($("input[name\x3d'iusefulness']").val()),e=parseInt($("input[name\x3d'ishippingStarWidth']").val()),b=(b+a+c+e)/4*20+"%";$("#foverallratingStarWidth").css({width:b})});$("#addsubWrite").click(function(){$(".emptys").each(function(){""==$(this).val()&&($(this).parents(".controls").addClass("error"),$(this).siblings(".help-block").text(strFun("TT_language_"+jsLanguage)["tomtop.message.cannotBeEmpty"]))});if(1==$("#addReviewInfo").length&&0==$(".error").length){$("#addReviewInfo").attr("action");var b=$.trim($("#ccomment").val());if(20>b.length||4E3<b.length)return Dialog(function(){var a=$(this).parents(".pu_pop");a.fadeOut(function(){a.remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],"comment number greater than 20 less than 4000"),!1;$("#addReviewInfo").ajaxForm(function(a){a=JSON.parse(a);1==a.status?Alert(function(){window.location.href=TT_CONFIG.domain+"/"+a.sku+"/review.html"},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],a.msg):Alert(function(){var a=$(this).parents(".pu_pop");a.fadeOut(function(){a.remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],a.msg)})}});$(".editsubWrite").click(function(){$(".emptys").each(function(){""==$(this).val()&&($(this).parents(".controls").addClass("error"),$(this).siblings(".help-block").text(strFun("TT_language_"+jsLanguage)["tomtop.message.cannotBeEmpty"]))});var b=$(this).parents().filter("form");1==b.length&&0==$(".error").length&&(b.attr("action"),b.ajaxForm(function(a){a=JSON.parse(a);1==a.status?Alert(function(){window.location.href=TT_CONFIG.domain+"/"+a.sku+"/review.html"},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],a.msg):Alert(function(){var a=$(this).parents(".pu_pop");a.fadeOut(function(){a.remove()})},strFun("TT_language_"+jsLanguage)["tomtop.common.tip"],a.msg)}))});$(".emptys").focus(function(){$(".emptys").parents(".controls").removeClass("error");$(".emptys").siblings(".help-block").text("")})});filterAttr={curr_list:null,selected:null,curr_sku:null,activeClass:"selectActive",forbidClass:"invalids",cpActClass:"cpActive",dataValue:"data-attr-value",dataId:"data-attr-id",dataKey:"data_key",dataType:"data-type",statusSku:"1",request:null,btnErrs:!1,init:function(){var b=this;$(".selectAttribute li").click(function(){var a=$(this).parents("li.productClass"),c=$(this).attr(b.dataValue),e=$(this).parents(".item_box").prev(".proColor").children("span"),d=e.attr(b.dataKey),e=e.attr(b.dataType);null!=b.request&&b.request.abort();if(!$(this).hasClass(b.forbidClass)){$(this).toggleClass(b.activeClass).siblings("li").removeClass(b.activeClass);$(this).hasClass(b.activeClass)?$(this).parents(".selectAttribute").siblings(".select_prompt").addClass("hide"):$(this).parents(".selectAttribute").siblings(".select_prompt").removeClass("hide");if(3==e||2==e)b.ImageSwitching(c),a.parents(".showCaseWarp").find(".m_imgZoom").ImgZoom();b.closeAttr(d);"wearhouseList"!=$(this).parent().attr("id")&&1==$(".navFixedTop").length&&(a=b.checkUrl(),c=TT_NS.lactions.langShort(),c=""==c?c:c+"/",$(".addreview").attr("data-url",a),0<=navigator.userAgent.indexOf("MSIE")&&0>navigator.userAgent.indexOf("Opera")||!a||window.history.replaceState(null,null,TT_NS.config.domain+c+a+".html"));1==$("#timeLimitScript").length?b.timeLimited():(b.presellDiscount(),b.price(b.us_nowprices(),b.us_origprices()));1==$(".navFixedTop").length&&("xsxl"!=b.statusSku&&b.skuStatus(),TT_NS.featured.bundlingFree())}});$(document).on("mouseover",".selectAttribute li",function(){if(!$(this).hasClass(filterAttr.forbidClass)){var a=$(".hoverBig .cloud-zoom img"),c=$(this).parents(".item_box").prev(".proColor"),e=c.children("span").attr(b.dataType),d=$(this).attr("data-attr-value");$(this).hasClass(filterAttr.activeClass)||3!=e&&2!=e||filterAttr.hoverImg(d,a);c.children("b").text(d)}});$(document).on("mouseout",".selectAttribute li",function(){if(1==$(this).siblings(".selectActive").length){var a=$(this).parents(".item_box").prev(".proColor"),b=$(".hoverBig .cloud-zoom img"),e=$(this).siblings(".selectActive").attr("data-attr-value"),d=$(".showCaseSmall_box .cpActive a").attr("href");a.children("b").text(e);b.attr("src",d)}});$(".currencyBox li").click(function(){$(this).parent(".currencyBox").hide();var a=$(this).find("span").text(),b=$(this).children("a").attr("data-currency"),e=$(".pu_notranslate").siblings(".active");switchCurrency(b);b=null==TT_NS.cookie.get("TT_CURR")?"USD":TT_NS.cookie.get("TT_CURR");$(".currencyBox").prev().html("\x3cspan class\x3d'symbolLab'\x3e"+a+"\x3c/span\x3e\x3ci class\x3d'icon-arr'\x3e \x3c/i\x3e");e.children("span").text(a);e.children("em").text(b);$(".flag_currency").text(b)});$(".currency").hover(function(){$(this).find(".currencyBox").show()},function(){$(this).find(".currencyBox").hide()})},currency:function(){return null==TT_NS.cookie.get("TT_CURR")?"USD":TT_NS.cookie.get("TT_CURR")},label:function(){return currencyLabel[this.currency()]},rate:function(){return currencyRate[this.currency()]},listingId:function(){return $("#listingId").val()},storageid:function(){return $("#storageid").val()},quantity:function(){return $("#quantity").val()},btn_value:function(b){0<b.indexOf("\x3c")&&(b=b.replace(/</ig,"\x26lt;"));0<b.indexOf("\x3e")&&(b=b.replace(/>/ig,"\x26gt;"));0<b.indexOf('"')&&(b=b.replace(/\"/ig,"\x26quot;"));return b},countdownHTML:function(b,a,c,e){return'\x3cp class\x3d"lineBlock"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.product.regularPrice"]+': \x3cspan usvalue\x3d"'+b+'" class\x3d"pricelab" id\x3d"d_origprice"\x3e'+c+a+'\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"lineBlock saleOff"\x3e('+e+'% OFF)\x3c/p\x3e\x3ci class\x3d"icon_clock lineBlock"\x3e \x3c/i\x3e\x3cp class\x3d"lineBlock"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.product.saleEndsIn"]+'\x3c/p\x3e\x3cdiv class\x3d"dealsTime lineBlock countdown"\x3e\x3cspan class\x3d"lineBlock days"\x3e00\x3c/span\x3e\x3cfont\x3ed\x3c/font\x3e\x3cspan class\x3d"lineBlock hours"\x3e00\x3c/span\x3eh\x3cspan class\x3d"lineBlock minutes"\x3e00\x3c/span\x3em\x3cspan class\x3d"lineBlock seconds"\x3e00\x3c/span\x3es\x3c/div\x3e'},hoverImg:function(b,a){var c=filterAttr.extractImg(mainContent,b),e=filterAttr.extractTitleImg(c);$.each(c,function(b,c){a.attr("src",url500+e);return!1})},extractImg:function(b,a){var c="",e=[];$.each(b,function(b,c){$.each(c.attributeMap,function(b,d){if(c.attributeMap[b].value==a){for(var f=0,g=c.imgList.length;f<g;f++)1==c.imgList[f].isThumb&&e.push(c.imgList[f]);return!1}})});for(c=0;c<e.length;c++)if(1==e[c].isSmall){var d=e[0];e[0]=e[c];e[c]=d}return(c=e)?c:!1},extractTitleImg:function(b){var a="";$.each(b,function(b,e){if(1==e.isMain)return a=e.imgUrl,!1});return a?a:!1},ImageSwitching:function(b){var a="",c="",e="",d=$(".hoverBig"),h=$("#smallClickUrl"),f=$(".productSmallPic");b=this.extractImg(mainContent,b);var g=this.extractTitleImg(b),a=a+'\x3cul class\x3d"productSmallmove lbUl moveBox"\x3e';$.each(b,function(b,d){a+='\x3cli class\x3d"moveList"\x3e\x3ca data-middleimg\x3d"'+url500+d.imgUrl+'" class\x3d"imgzoom-triggle" href\x3d"'+url2000+d.imgUrl+'"\x3e\x3cimg src\x3d"'+url60+d.imgUrl+'" class\x3d"zoom-tiny-image"\x3e\x3c/a\x3e\x3c/li\x3e';c+='\x3cli class\x3d"lineBlock moveList"\x3e\x3ca data-middleimg\x3d"'+url500+d.imgUrl+'" class\x3d"imgzoom-triggle" class\x3d"imgzoom-triggle" href\x3d"'+url2000+d.imgUrl+'"\x3e\x3cimg src\x3d"'+url60+d.imgUrl+'" class\x3d"zoom-tiny-image"\x3e\x3c/a\x3e\x3c/li\x3e';e+='\x3cli class\x3d"moveList"\x3e\x3ca data-middleimg\x3d"'+url500+d.imgUrl+'" class\x3d"imgzoom-triggle" href\x3d"'+url2000+d.imgUrl+'"\x3e\x3cimg src\x3d"'+url60+d.imgUrl+'" class\x3d"zoom-tiny-image"\x3e\x3c/a\x3e\x3c/li\x3e'});a+="\x3c/ul\x3e";bigUrl='\x3ca class\x3d"middle-img" href\x3d"javascript:void(0)"\x3e\x3cimg src\x3d"'+url500+g+'" style\x3d"display: inline-block;"\x3e\x3c/a\x3e\x3cspan class\x3d"empty"\x3e\x3c/span\x3e';listbigUrl='\x3ca class\x3d"middle-img" href\x3d"javascript:void(0)"\x3e\x3cimg src\x3d"'+url500+g+'" style\x3d"display: inline-block;"\x3e\x3c/a\x3e\x3cspan class\x3d"empty"\x3e\x3c/span\x3e';0==$(".navFixedTop").length?(f.html('\x3cul class\x3d"productSmallmove lbUl moveBox"\x3e'+e+"\x3c/ul\x3e"),d.find(".wrap").html(listbigUrl)):(f.html(a),d.find(".wrap").html(bigUrl));h.html(c);f.find("li").eq(0).addClass(filterAttr.cpActClass);h.find("li").eq(0).addClass(filterAttr.cpActClass);$(".showCaseSmall_box .moveHidden").carousel({_height:"",_upDown:"on",_leftBtnShow:"on",_leftClass:"showCaseL",_rightClass:"showCaseR"});$(".m_imgZoom").ImgZoom()},closeAttr:function(b){this.filterSku();for(var a=$(".selectAttribute"),c=0;c<a.length;c++){var e=a.eq(c).parents(".item_box").prev(".proColor").find("span").attr("data_key"),d=a.eq(c).find("li");if(e!=(void 0==b?"":b)){for(var h=[],f=0;f<mainContent.length;f++)mainContent[f].isDel=0,h.push(mainContent[f]);for(f=0;f<this.selected.length;f++){var g=this.selected[f].attr_name,l=this.selected[f].attr_value;if(g!=e)for(var p in mainContent){var n=!1,k=mainContent[p].whouse,m=mainContent[p].attributeMap;if("whouse"==g)for(var q in k)q==l&&(n=!0);else for(var t in m)g==t&&l==m[t].value&&(n=!0);n||(h[p].isDel=1)}}for(e=0;e<d.length;e++)f=d.eq(e),g=f.parents(".item_box").prev(".proColor").find("span").attr("data_key"),this.forbidSelect(f,h,g)}}},filterSku:function(){var b=0,a=$(".selectAttribute");curr_list=null;curr_list=[];this.getAttrValue(a);if(1<a.length)for(var c=0;c<mainContent.length;c++){for(var e=0,a=0;a<this.selected.length;a++){var d=this.selected[a].attr_name,h=this.selected[a].attr_value;if("whouse"==d){var d=mainContent[c].whouse,f;for(f in d)if(f==h){e++;break}}else{var g=mainContent[c].attributeMap;for(f in g)if(f==d&&g[f].value==h){e++;break}}}e==a&&(b++,curr_list.push(mainContent[c]))}else{f=a.find("li.selectActive").attr("data-attr-value");var l=$("input[name\x3dproductSku]").val();$('input[name\x3d"listingId"]').addClass("no-maps-cannot-change");for(c in mainContent)if(mainContent[c].sku==l)for(e in a=mainContent[c].whouse,a)if(a[f]){$("input[name\x3dproductSku]").val(l);curr_list.push(mainContent[c]);curr_sku=curr_list[0];this.curr_skus();$("#p_sku_s").text(strFun("TT_language_"+jsLanguage)["tomtop.product.item"]+"#: "+l).attr("data-sku",l);return}}1==b?(curr_sku=curr_list[0],$("#p_sku_s").text(strFun("TT_language_"+jsLanguage)["tomtop.product.item"]+"#: "+curr_sku.sku).attr("data-sku",l),$("input[name\x3dproductSku]").val(curr_sku.sku),$("input[name\x3dlistingId]").val(curr_sku.listingId),$(".showInformation h1").children("span").eq(0).text(curr_sku.title),$(".showInformation .sub_title").text(curr_sku.shortTitle),this.curr_skus(),this.btnErrs=!1):($('input[name\x3d"listingId"]').hasClass("no-maps-cannot-change")||$('input[name\x3d"listingId"]').val(""),console.log("\u5c5e\u6027\u4e0d\u552f\u4e00"))},getAttrValue:function(b){for(var a,c=[],e=0;e<b.length;e++){var d=b.eq(e).parents(".item_box").prev(".proColor").find("span").attr("data_key");(a=b.eq(e).find(".selectActive").attr("data-attr-value"))&&(a=this.btn_value(a));void 0!=a&&(a={attr_name:d,attr_value:a},c.push(a));"whouse"==d&&(a=b.eq(e).find("li.selectActive"),d=a.attr("data-attr-id"),a=a.attr("data-attr-value"),$('input[name\x3d"storageid"]').val(d),$('input[name\x3d"whouse"]').val(a))}this.selected=c},curr_skus:function(){if("undefined"!=typeof mainContent)for(var b=0;b<mainContent.length;b++)if($("#productSku").val()==mainContent[b].sku){this.curr_sku=mainContent[b];break}return this.curr_sku},checkUrl:function(){var b=this.curr_skus();if(this.whouseVal())var a=b.url;return a},whouseVal:function(){return $('input[name\x3d"whouse"]').val()||"CN"},sku_whouse:function(){var b=this.curr_skus();if(this.whouseVal())var a=b.whouse[this.whouseVal()];return a},us_nowprices:function(){var b=$("#detailPrice").text();this.whouseVal()&&(b=this.sku_whouse().us_nowprice);return b},us_origprices:function(){var b=$("#d_origprice").text();this.whouseVal()&&(b=this.sku_whouse().us_origprice);return b},off:function(b,a){return Math.ceil(100-b/a*100)},saleWarp:function(){return $(".saleWarp")},stockTimeFun:function(){var b=this.curr_skus(),a=$('input[name\x3d"whouse"]').val()||"CN",b=b.whouse[a],c,a=b.inStockShipTime,e=b.outStockShipTime,d={on:function(){$(".dispath_hour").show();$(".dispath_day").hide()},off:function(){$(".dispath_day").show();$(".dispath_hour").hide()}};0<b.qty?3>=a?(c=24*a,d.on()):(c=a,d.off()):3>=e?(c=24*e,d.on()):(c=e,d.off());$(".dispath_num").text(c);0==c&&$(".dispatch").hide()},skuWhouse:function(){this.curr_skus();var b=$('input[name\x3d"whouse"]').val()||"CN";return this.curr_skus().whouse[b]},presellWhouse:function(){var b=this.skuWhouse(),a=$("#serverTime").text(),c=b.saleStartDate,e=b.saleEndDate,b=b.deliveryTime,d=$("#presale_listingIds").val();this.request=$.ajax({type:"post",dataType:"html",url:domain+"index.php?r\x3ddetails/default/presaleorders"+TT_NS.lactions.lang(),data:{serverTime:a,presale_saleStartDate:c,presale_saleEndDate:e,presale_deliveryTime:b,presale_listingIds:d},success:function(a){$("#detail_presale").html(a);$(".productBigPic_box").prepend('\x3cdiv class\x3d"presale_label"\x3e\x3c/div\x3e');presell.init()}})},skuStaErr:function(){var b=this.skuWhouse();if(1!=b.status&&40!=b.status||1>b.qty&&1!=b.oversold)$("#productStatus").val(0),$(".dispatch").hide(),this.btnError()},skuStatus:function(){var b=this.skuWhouse();$(".dispatch").show();$("#detail_presale").html("");$("#productStatus").val(1);2==b.status||1==b.status&&0>=b.qty&&0==b.booked&&1!=b.oversold||3==b.status&&1!=b.booked||40==b.status&&1>b.qty&&1!=b.oversold?($(".presale_label").remove(),$("#productStatus").val(0),$(".dispatch").hide(),this.btnError()):(1==b.status&&1>b.qty&&1!=b.oversold||3==b.status)&&1==b.booked?($(".presale_label").remove(),$(".dispatch").hide(),this.btnNotice()):40==b.status?($(".dispatch").hide(),this.btnPresale(),this.presellWhouse()):($(".presale_label").remove(),this.btnCar(),1==this.btnErrs&&this.btnError())},presellDiscount:function(){var b=this.skuWhouse(),a=b.us_nowprice,c=b.us_origprice,e=this.off(a,c),d=b.saleEndDate,h=b.deliveryTime,f=b.saleStartDate,g=this.saleWarp(),l=$("#serverTime").text().split(" ")[0],p=$("#serverTime").text(),n=this.label(),k=this.rate(),m=switchPrice(c,k);switchPrice(a,k);var k=Date.parse(new Date(d)),p=Date.parse(new Date(p)),q=Date.parse(new Date(f));this.statusSku=b.status;this.skuStatus();this.stockTimeFun();0<l.indexOf("-")&&(l=l.replace(/\-/ig,"/"));""!=d&&(b=d.split(" ")[0],0<b.indexOf("-")&&b.replace(/\-/ig,"/"));""!=f&&(f=f.split(" ")[0],0<f.indexOf("-")&&f.replace(/\-/ig,"/"));$(".discountFix i").text(e);c!=a&&(""==d&&""==g?g.html(""):""!=d&&""==h?(1==$(".presaleListBox").length?g.html('\x3cp class\x3d"lineBlock"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.product.regularPrice"]+': \x3cspan usvalue\x3d"'+c+'" class\x3d"pricelab" id\x3d"d_origprice"\x3e'+n+m+'\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"lineBlock saleOff"\x3e'+e+'% OFF\x3c/p\x3e\x3cdiv class\x3d"saleDown"\x3e\x3ci class\x3d"icon_clock lineBlock"\x3e \x3c/i\x3e\x3cdiv class\x3d"dealsTime lineBlock countdown"\x3e\x3cspan class\x3d"lineBlock hours"\x3e00\x3c/span\x3eh\x3cspan class\x3d"lineBlock minutes"\x3e00\x3c/span\x3em\x3cspan class\x3d"lineBlock seconds"\x3e00\x3c/span\x3e\x3c/div\x3es\x3c/div\x3e'):g.html('\x3cp class\x3d"lineBlock"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.product.regularPrice"]+': \x3cspan usvalue\x3d"'+c+'" class\x3d"pricelab" id\x3d"d_origprice"\x3e'+n+m+'\x3c/span\x3e\x3c/p\x3e\x3cp class\x3d"lineBlock saleOff"\x3e('+e+'% OFF)\x3c/p\x3e\x3ci class\x3d"icon_clock lineBlock"\x3e \x3c/i\x3e\x3cp class\x3d"lineBlock"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.product.saleEndsIn"]+'\x3c/p\x3e\x3cdiv class\x3d"dealsTime lineBlock countdown"\x3e\x3cspan class\x3d"lineBlock hours"\x3e00\x3c/span\x3eh\x3cspan class\x3d"lineBlock minutes"\x3e00\x3c/span\x3em\x3cspan class\x3d"lineBlock seconds"\x3e00\x3c/span\x3es\x3c/div\x3e'),$(".saleWarp .countdown").downCount({date:l+" 23:59:59"})):k==p?(g.html('\x3cdiv class\x3d"saleDown"\x3e\x3ci class\x3d"icon_clock lineBlock"\x3e \x3c/i\x3e\x3cdiv class\x3d"dealsTime lineBlock countdown"\x3e\x3cspan class\x3d"lineBlock hours"\x3e00\x3c/span\x3eh\x3cspan class\x3d"lineBlock minutes"\x3e00\x3c/span\x3em\x3cspan class\x3d"lineBlock seconds"\x3e00\x3c/span\x3es\x3c/div\x3e\x3c/div\x3e'),$(".saleWarp .countdown").downCount({date:d})):k<p?(g.html(""),filterAttr.presaleError()):q>p?(g.html(""),filterAttr.presaleError()):g.html(""))},forbidSelect:function(b,a,c,e){var d=b.attr("data-attr-value"),d=this.btn_value(d),h=!1,f;for(f in a)if(0==a[f].isDel){var g=a[f].whouse,l=a[f].attributeMap;if("whouse"==c)for(var p in g)p==d&&(h=!0);else for(var n in l)1==e?n==c&&l[n]==d&&(h=!0):n==c&&l[n].value==d&&(h=!0)}h?b.hasClass(this.forbidClass)&&b.removeClass(this.forbidClass):b.addClass(this.forbidClass).removeClass(this.activeClass)},noticeAjax:function(b){$.ajax({type:"POST",url:"/index.php?r\x3dshipping/default/ajaxproductnotice",data:b,dataType:"json",success:function(a){1==a.ret?($("#subscribe_success").addClass("dialogs_show").show(),$("#subscribe_email").removeClass("dialogs_show").hide(),$(".notice_error").hide(),$(".notice_sucess").show()):($("#subscribe_success").addClass("dialogs_show").show(),$("#subscribe_email").removeClass("dialogs_show").hide(),$(".notice_error").show(),$(".notice_sucess").hide());fnDialogsBgShow()}})},addToCart:function(){var b=this;1==$("#wearhouseList").find(".selectActive").length&&($(document).on("click","#arrival_notice",function(){if(null!=TT_NS.cookie.get("LOGIN_TOKEN")){var a={listingid:b.listingId(),sku:b.curr_sku.sku,storageid:b.storageid()};b.noticeAjax(a)}else fnDialogsBgShow(),$("#subscribe_email").addClass("dialogs_show").show()}),$(document).on("click",".arrival_content .submit",function(){var a=$(".arrival_content").children("input");if(1==TT_NS.check.email(a.val())){var c={sendEmail:a.val(),listingid:b.listingId(),sku:b.curr_sku.sku,storageid:b.storageid()};a.next(".error").remove();b.noticeAjax(c)}else 0==a.next(".error").length&&a.after('\x3cp class\x3d"error"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.message.wrongEmail"]+"\x3c/p\x3e")}),$(document).on("click",".addCart\x3ea",function(){if(0==$(this).hasClass("btn-error")){for(var a=!0,c=0;c<$(".selectAttribute").length;c++){var e=$(".selectAttribute").eq(c);e.children("li").hasClass("selectActive")?e.siblings(".select_prompt").addClass("hide"):(e.siblings(".select_prompt").removeClass("hide"),a=!1)}if(1==a){var a=b.storageid(),c=b.listingId(),e=b.quantity(),d=TT_NS.cookie.get("USERID_COOKIE_NAME"),a=[{listingid:c,qty:e,storageid:a,userid:d,website:1}],c="";0==$(".svgLoading").length&&$(this).after('\x3cimg class\x3d"svgLoading" src\x3d"'+TT_CONFIG.staticUrl+'/acount/icon/throbber.svg"\x3e');$(this).hasClass("addToBtnCart")&&(c="false");$(this).hasClass("buyNowBtnCart")&&(c="true");b.cartAjax(a,c)}}}))},cartAjax:function(b,a){b={data:JSON.stringify(b)};TT_NS.cookie.get("plist");if("false"==a)$.ajax({type:"GET",url:"/index.php?r\x3dcart/default/add",data:b,cache:!1,dataType:"json",success:function(a){1==a.ret&&($(".cart_total").text(a.data),0==$(".buyNowBtnCart").hasClass("btn-error")&&(fnDialogsBg(),addHeartAjax(),$("#add_p_info").addClass("dialogs_show"),$(".addCartInf").show(),$(".addHeartInf").hide(),$(".svgLoading").remove()))}});else{var c=this.listingId(),e=this.storageid(),d=$("#quantity").val(),c=TT_CONFIG.cartUrl+"/order/buynow/"+e+"?listingids\x3d"+c+"\x26qty\x3d"+d;1==this.statusSku?window.location.href=c:TT_NS.cookie.get("LOGIN_TOKEN")?5==$("#timeLimitType").val()&&0==this.activated?($(".m_email_pop").show().removeClass("hide"),$(".svgLoading").remove()):window.location.href=c:(5==$("#timeLimitType").val()?TT_NS.cookie.tem("TT_REDIRECT_URL",location.href):TT_NS.cookie.tem("TT_REDIRECT_URL",c),window.location.href=TT_CONFIG.loginUrl)}},limitFun:function(b){0!=this.limitSale&&this.limitSale<b?($("#specialBuyNum").removeClass("hide"),$("#specialBuyNum").children("em").text(this.limitSale)):$("#specialBuyNum").addClass("hide")},quantitys:function(){var b=this;$(".qty_wrap .next").click(function(){var a=$(this).parent().find(".quantity"),c=a.val();999<=c?c=999:c++;a.val(c);filterAttr.changeBtnHref(c);b.limitFun(c);TT_GET("shipping").getShippingData({})});$(".qty_wrap .prev").click(function(){var a=$(this).parent().find(".quantity"),c=a.val();1>=c?c=1:c--;a.val(c);filterAttr.changeBtnHref(c);b.limitFun(c);TT_GET("shipping").getShippingData({})});$(".quantity").keyup(function(){var a=$(this).val();0==a?a=1:a;$(this).val(a);this.value=this.value.replace(/[^0-9]/g,"");filterAttr.changeBtnHref(a);b.limitFun(a);TT_GET("shipping").getShippingData({})})},changeBtnHref:function(b){var a=this.listingId(),c=this.storageid(),e=$(".preorderCart");1<=e.length&&0==e.hasClass("btn-error")&&TT_NS.cookie.get("LOGIN_TOKEN")&&(e.attr("href",TT_CONFIG.cartUrl+"/order/buynow/"+c+"?listingids\x3d"+a+"\x26qty\x3d"+b),$(".navFixedTop").find(".preorderCart").attr("href",TT_CONFIG.cartUrl+"/order/buynow/"+c+"?listingids\x3d"+a+"\x26qty\x3d"+b))},btnError:function(){$(".outStockCart").removeClass("hide");$(".buyNowBtnCart,.preorderCart,.addToBtnCart,#arrival_notice").addClass("hide")},btnCar:function(){$(".buyNowBtnCart").addClass("btn-orange").removeClass("btn-error heartClick hide");$(".addToBtnCart").addClass("hide");$(".showInformation").find(".addToBtnCart").addClass("btn-orange").removeClass("btn-error hide");$(".preorderCart,.outStockCart,#arrival_notice").addClass("hide")},btnPresale:function(){var b=this.listingId(),a=this.storageid(),c=this.quantity();$(".preorderCart").addClass("btn-orange").removeClass("btn-error hide");$(".addToBtnCart,.buyNowBtnCart,.outStockCart").addClass("hide");TT_NS.cookie.get("LOGIN_TOKEN")&&""!=b&&""!=a?$(".preorderCart").removeClass("heartClick").attr("href",TT_CONFIG.cartUrl+"/order/buynow/"+a+"?listingids\x3d"+b+"\x26qty\x3d"+c):$(".preorderCart").addClass("heartClick").attr("href","javascript:void(0)")},btnNotice:function(){$("#arrival_notice").addClass("btn-orange").removeClass("btn-error hide").attr("href","javascript:void(0)");$(".addToBtnCart,.buyNowBtnCart,.outStockCart,.preorderCart").addClass("hide")},presaleError:function(){$(".preorderCart").addClass("btn-error").removeClass("btn-orange hide").attr("href","javascript:void(0)");$(".addToBtnCart,.buyNowBtnCart,.outStockCart,#arrival_notice").addClass("hide")},timeLimit:function(){$(".buyNowBtnCart").addClass("btn-orange").removeClass("btn-error hide").attr("href","javascript:void(0)");$(".preorderCart,.addToBtnCart,.outStockCart,#arrival_notice").addClass("hide")},timeLimitError:function(){$(".buyNowBtnCart").addClass("btn-orange heartClick").removeClass("btn-error hide").attr("href","javascript:void(0)");$(".preorderCart,.addToBtnCart,.outStockCart,#arrival_notice").addClass("hide")},manjian:function(){$(".addToBtnCart").addClass("btn-orange").removeClass("btn-error hide").attr("href","javascript:void(0)");$(".preorderCart,.buyNowBtnCart,.outStockCart,#arrival_notice").addClass("hide")},timeLimited:function(){var b=this,a=b.saleWarp(),c=$("#productSku").val(),e=b.rate(),d=timeLimit,h=$("#storageid").val(),f=!0;$(".m_sales_promotion").addClass("hide").html("");$(".m_progress_bar").remove();$(".activities_that").remove();$(".member_Price").addClass("hide");if("undefined"!=typeof d[c]&&(c=d[c],"undefined"!=typeof c[h])){var f=!1,g=c[h],c=g.actPrice,l=b.us_origprices(),p=switchPrice(l,e),n=b.us_nowprices()<c?b.us_nowprices():c,k=g.saleEndDate,m=b.off(n,l),q=b.label(),d=$("#serverTime").text(),c=Date.parse(new Date(k)),d=Date.parse(new Date(d));if(17==g.actType&&null==TT_NS.cookie.get("LOGIN_TOKEN"))f=!0;else if(17==g.actType&&TT_NS.cookie.get("LOGIN_TOKEN"))$.ajax({type:"GET",url:"/index.php?r\x3dmember/default/mlever",timeout:3E3,cache:!1,dataType:"json",success:function(a){1==a.status?a.data>=g.memberLevel?(b.us_nowprices()>g.actPrice?0>=g.lastCount?$(".member_Price").addClass("hide"):$(".member_Price").removeClass("hide"):$(".member_Price").addClass("hide"),b.price(b.us_nowprices(),b.us_origprices(),g.actPrice),b.skuStatus()):($(".member_Price").addClass("hide"),b.mormalPro()):b.mormalPro()}});else{null!=g.appPrice?(e=switchPrice(g.appPrice,e),$(".m_app_sale").removeClass("hide"),$("#APP_Price").text(q+e).attr("usvalue",g.appPrice)):$(".m_app_sale").addClass("hide");""!=g.actUrl?e=g.actUrl:(e="en"!=jsLanguage?"/"+jsLanguage:"",h=g.actCode.toLowerCase(),e=TT_CONFIG.domain+e+"/zone/"+h+".html");this.statusSku="xsxl";$("#productStatus").val(1);$(".presale_label").remove();0<k.indexOf("-")&&(k=k.replace(/\-/ig,"/"));864E5>c-d&&$(".days").hide().next("font").hide();3==g.actType&&null==TT_NS.cookie.get("LOGIN_TOKEN")?b.timeLimitError():-1!=$.inArray(g.actType,[6,7,8,9,10,11,12,13,14,15,16])&&0==g.isStopCart&&0>=g.lastCount?(f=!0,b.price(b.us_nowprices(),b.us_origprices())):(b.timeLimit(),b.sku_whouse(),b.skuStaErr());if(""!=g.dataList&&0==f){$(".m_presale,.priceWarp .label").hide();c='\x3cdiv class\x3d"m_progress_bar"\x3e\x3cdiv class\x3d"lineBlock bar_wrap"\x3e\x3cdiv class\x3d"bar_wrap_cont" style\x3d"width: '+100*g.currentCount/g.actQty+'%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"lineBlock bar_sale"\x3e\x3cspan class\x3d"pro_sell" data-sell\x3d"'+g.currentCount+'"\x3e'+g.currentCount+'\x3c/span\x3e/\x3cspan class\x3d"pro_count" data-procount\x3d"'+g.actQty+'"\x3e'+g.actQty+"\x3c/span\x3e "+strFun("TT_language_"+jsLanguage)["tomtop.product.pcsSold"]+" \x3c/div\x3e \x3c/div\x3e";d={init:function(a){a='\x3cdiv class\x3d"flashDeals"\x3e'+a+'\x3cp class\x3d"description"\x3e'+g.actDesc+"\x3cp\x3e\x3c/div\x3e";$(".m_sales_promotion").removeClass("hide").prepend(a)}};-1==$.inArray(g.actType,[6,7,8,9,10,11,12,13,14,15,16])?(h=g.dataList,d.init(h),$(".m_sales_promotion").append(c)):(h="\x3cem\x3e"+g.actTitle+"\x3c/em\x3e",d.init(h),1==g.isShowUrl&&$(".description").append('\x3cspan\x3e\x3ca href\x3d"'+e+'" target\x3d"_blank"\x3edetail\x3e\x3e\x3c/a\x3e\x3c/span\x3e'),b.manjian(),1==g.isStopCart&&0>=g.lastCount&&b.btnError(),b.skuStaErr());5==g.actType?TT_NS.cookie.get("LOGIN_TOKEN")?$.ajax({url:TT_NS.config.domain+"index.php?r\x3dmember/default/ajaxmembergroupinfo",timeout:1E4,cache:!1,type:"get",dataType:"json",success:function(c){b.activated=c.data.isActivated;1==c.status&&c.data.groupId==parseInt($("#timeLimitGroupId").val())?(b.price(n,l),n<l&&($(".discountFix i").text(m),a.html(b.countdownHTML(l,p,q,m)),$(".countdown").downCount({date:k})),1>g.lastCount&&(b.btnError(),$("#specialEnd").removeClass("hide"))):(b.price(b.us_nowprices(),b.us_origprices()),b.presellDiscount(),$(".m_progress_bar,.m_sales_promotion").remove(),$(".activities_that").remove())}}):(1>g.lastCount&&(b.btnError(),$("#specialEnd").removeClass("hide")),b.price(n,l)):(b.price(n,l),n<l&&($(".discountFix i").text(m),a.html(b.countdownHTML(l,p,q,m)),$(".countdown").downCount({date:k})));e=$("#dataPre").find(".pricelab");c=0;for(d=e.length;c<d;c++)h=e.eq(c).attr("usvalue"),h=switchPrice(h,b.rate()),q=b.label(),e.eq(c).text(q+h);presell.init()}$(".dispatch").show();b.stockTimeFun()}}1==f&&b.mormalPro()},mormalPro:function(){this.us_nowprices();this.us_origprices();this.price(this.us_nowprices(),this.us_origprices());this.presellDiscount();$(".m_app_sale").addClass("hide");$(".m_presale,.priceWarp .label").show()},price:function(b,a,c){var e=this.label(),d=this.rate(),h=switchPrice(a,d),f=switchPrice(b,d),d=switchPrice(c,d);$("#dataPre,#dataLabel").remove();$("#d_origprice").attr("usvalue",a);$("#detailPrice,.navFixTxt .pricelab").attr("usvalue",b);$("#d_origprice").text(e+h);$("#detailPrice").text(f);$(".navFixTxt .pricelab").text(e+f);c&&($(".memberPrice").attr("usvalue",c),$(".memberPrice").text(e+d));TT_GET("shipping").getShippingData({})},activity_ListingIds:function(){var b=!1;if(1==$("#timeLimitScript").length){var a=this.listingId(),c=$("#productSku").val();$("#storageid").val();var e=timeLimit;$("#specialEnd").addClass("hide");$.each(e,function(d,e){d==c&&$.each(e,function(c,d){d.listingId==a&&(b=!0,filterAttr.timeLimited())})})}0==b&&(filterAttr.presellDiscount(),filterAttr.price(filterAttr.us_nowprices(),filterAttr.us_origprices()));filterAttr.addToCart()},sendactivateEmail:function(){TT_NS.cookie.get("TT_UGROUPID")&&$.ajax({url:domain+"index.php?r\x3dmember/default/useractivate",timeout:1E4,type:"get",dataType:"json",success:function(b){1==b.status&&$(".tip_mess").removeClass("hide")}})}};1==$(".navFixedTop").length&&(filterAttr.init(),filterAttr.closeAttr(),filterAttr.quantitys(),filterAttr.activity_ListingIds(),TT_NS.featured.init(),TT_NS.featured.bundlingFree(),TT_NS.featured.itemsAddToCart(),TT_NS.describeImgs.insert());$.navOperate();var app_sale={timmer:null,init:function(){this.showEwm();this.creatQrcode()},showEwm:function(){var b=this;$(".m_app_sale .hd").mouseenter(function(){$(this).parents(".m_app_sale").addClass("show")});$(".m_app_sale .hd").mouseleave(function(){var a=$(this);b.timmer=setTimeout(function(){a.parents(".m_app_sale").removeClass("show")},200)});$(".m_app_sale .appDown_wrap").mouseenter(function(){clearTimeout(b.timmer);$(this).parents(".m_app_sale").addClass("show")});$(".m_app_sale .appDown_wrap").mouseleave(function(){$(this).parents(".m_app_sale").removeClass("show")})},creatQrcode:function(){var b="https://goo.gl/9xiFzc?tomtop\x26listid\x3d"+$('input[name\x3d"listingId"]').val();(new QRCode(document.getElementById("code"),{width:100,height:100})).makeCode(b)}};$(function(){0!==$(".m_app_sale").length&&app_sale.init()});(function(b){b.extend({tipsBox:function(a){a=b.extend({obj:null,str:"+1",startSize:"12px",endSize:"12px",interval:600,color:"red",callback:function(){}},a);b("body").append("\x3cspan class\x3d'num'\x3e"+a.str+"\x3c/span\x3e");var c=b(".num"),e=a.obj.offset().left+a.obj.width()/2,d=a.obj.offset().top-a.obj.height()/2;c.css({position:"absolute",left:e+"px",top:d+"px","z-index":9999,"font-size":a.startSize,"line-height":a.endSize,color:a.color});c.animate({"font-size":a.endSize,opacity:"0",left:a.obj.offset().left+a.obj.width()+"px",top:d-parseInt(a.startSize)+"px"},a.interval,function(){c.remove();a.callback()})}})})(jQuery);var googlgeDataRecomend={init:function(){0<$("#google_recomend").length&&(console.log("\u5df2\u7ecf\u8fdb\u5165\u4e86google abtest\u9875\u9762\u3002"),this.AlsoViewed())},AlsoViewed:function(){var b=$("#listingId").val(),a=TT_NS.cookie.get("USERID_COOKIE_NAME")||"20180808011026533085",c=$("#d_origprice").attr("usvalue"),e=$("#detailPrice").attr("usvalue"),d=TT_NS.cookie.get("TT_LANG")||1,b={listingId:b,visitorId:a,origprice:c,nowprice:e,size:10,lang:d};console.log("googleData:"+JSON.stringify(b));$("#google_rc_youMayLike").append("\x3cdiv class\x3d'loading-ajax' /\x3e");$.ajax({type:"GET",cache:!1,url:"https://gatewayapi.tomtop.com/product/ic/v4/product/youMayLike?website\x3d1",data:b,dataType:"json",success:function(a){var b=a.data,c='\x3cdiv class\x3d"listMoveWarp AlsoViewed"\x3e\x3cdiv class\x3d"lbBox listPageTitle"\x3e\r\n\t\t            \x3ch2 class\x3d"lineBlock tt"\x3e'+strFun("TT_language_"+jsLanguage)["tomtop.common.youMayalsolike"]+'\x3c/h2\x3e\r\n\t\t            \x3cp class\x3d"lineBlock text-right"\x3e\r\n\t\t                \x3cspan class\x3d"page"\x3e1\x3c/span\x3e/\x3cspan class\x3d"pages"\x3e1\x3c/span\x3e\r\n\t\t            \x3c/p\x3e\r\n\t\t        \x3c/div\x3e\x3ca class\x3d"moveLeftClick leftArr" href\x3d"javascript:void(0)"\x3e\x3c/a\x3e\r\n\t\t        \x3ca class\x3d"moveRightClick rightArr" href\x3d"javascript:void(0)"\x3e\x3c/a\x3e\r\n\t\t        \x3cdiv class\x3d"moveHidden"\x3e\x3cul class\x3d"moveBox lbUl"\x3e',d="";if(0<a.data.length){for(var e=0;e<a.data.length;e++)var h=Math.ceil(100-b[e].nowprice/b[e].origprice*100),k="",k=0==h?" showSale_off":" showSale_on",d=d+('\x3cli class\x3d"moveList productClass GAClickBox"\x3e\r\n\t\t\t\t    \x3cdiv class\x3d"productImg"\x3e\r\n\t\t\t\t        \x3ca href\x3d"/'+b[e].url+".html?rc_token\x3d"+b[e].recommendationToken+'"\x3e\r\n\t\t\t\t        \t\x3cimg alt\x3d"'+b[e].title+'" id\x3d"GACLICK+index+google_alsoLike-I+'+b[e].sku+"+0"+e+'" class\x3d"lazy" src\x3d"'+TT_NS.config.url168+b[e].imageUrl+'" data-original\x3d"'+TT_NS.config.url168+b[e].imageUrl+'" style\x3d"display: inline-block;"\x3e\r\n\t\t\t\t\t\t\x3c/a\x3e\r\n\t\t\t\t        \x3cdiv class\x3d"icon_sale'+k+'"\x3e\r\n\t\t\t\t            \x3cspan\x3e\r\n\t\t\t\t             \x3cem\x3e'+h+'\x3c/em\x3e%\x3ci\x3eOFF\x3c/i\x3e\r\n\t\t\t\t            \x3c/span\x3e\r\n\t\t\t\t        \x3c/div\x3e\r\n\t\t\t\t    \x3c/div\x3e\r\n\t\t\t\t    \x3ca id\x3d"GACLICK+index+google_alsoLike-T+'+b[e].sku+"+0"+e+'" class\x3d"productTitle GATitle" href\x3d"/'+b[e].url+".html?rc_token\x3d"+b[e].recommendationToken+'" title\x3d"'+b[e].title+'"\x3e'+b[e].title+'\x3c/a\x3e\r\n\t\t\t\t    \x3cp class\x3d"GAPrice productPrice pricelab" usvalue\x3d"'+b[e].nowprice+'"\x3e'+b[e].symbol+b[e].nowprice+'\x3c/p\x3e\r\n\t\t\t\t    \x3cp class\x3d"productCost pricelab'+k+'" usvalue\x3d"'+b[e].origprice+'"\x3e'+b[e].symbol+b[e].origprice+"\x3c/p\x3e\r\n\t\t\t\t   \x3c/li\x3e");b=c+d+"\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";$("#google_rc_youMayLike .loading-ajax").remove();$("#google_rc_youMayLike").html(b);$("#google_rc_youMayLike img.lazy").lazyload();$("#google_rc_youMayLike .moveHidden").carousel({_height:"",_auto:"off",_leftClass:"leftArr",_rightClass:"rightArr",callback:function(a,b){$("#google_rc_youMayLike").find(".page").text(a);$("#google_rc_youMayLike").find(".pages").text(b)}});6>a.data.length&&($("#google_rc_youMayLike .leftArr").removeClass("showBtn"),$("#google_rc_youMayLike .rightArr").removeClass("showBtn"))}}})}};googlgeDataRecomend.init();