(function(b){var f={init:function(c,a){f.fillHtml(c,a);f.bindEvent(c,a)},fillHtml:function(c,a){c.empty();var d=b("."+a.ulClass);1<a.current?d.siblings(".bm_page").children(".pageP").removeClass("disabled"):d.siblings(".bm_page").children(".pageP").addClass("disabled");1!=a.current&&4<=a.current&&4!=a.pageCount&&c.append('\x3cli class\x3d"tcdNumber pageLink"\x3e\x3ca href\x3d"javascript:void(0);"\x3e1\x3c/a\x3e\x3c/li\x3e');2<a.current-2&&a.current<=a.pageCount&&5<a.pageCount&&c.append("\x3cli\x3e...\x3c/li\x3e");var e=a.current-2,f=a.current+2;(1<e&&4>a.current||1==a.current)&&f++;for(a.current>a.pageCount-4&&a.current>=a.pageCount&&e--;e<=f;e++)e<=a.pageCount&&1<=e&&(e!=a.current?c.append('\x3cli class\x3d"tcdNumber pageLink"\x3e\x3ca href\x3d"javascript:void(0);"\x3e'+e+"\x3c/a\x3e\x3c/li\x3e"):c.append('\x3cli class\x3d"current pageLink"\x3e\x3ca class\x3d"active" href\x3d"javascript:void(0);"\x3e'+e+"\x3c/a\x3e\x3c/li\x3e"));a.current+2<a.pageCount-1&&1<=a.current&&5<a.pageCount&&c.append("\x3cli\x3e...\x3c/li\x3e");a.current!=a.pageCount&&a.current<a.pageCount-2&&4!=a.pageCount&&c.append('\x3cli class\x3d"tcdNumber pageLink"\x3e\x3ca href\x3d"javascript:void(0);"\x3e'+a.pageCount+"\x3c/a\x3e\x3c/li\x3e");a.current<a.pageCount?d.siblings(".bm_page").children(".pageN").removeClass("disabled"):d.siblings(".bm_page").children(".pageN").addClass("disabled")},bindEvent:function(c,a){return function(){c.on("click","li.tcdNumber",function(){var d=parseInt(b(this).text()),e=a.ulClass+d;"function"==typeof a.backFn&&a.backFn(d);f.pageAjax(d,e,a,!1,c)});b(c.siblings(".pageP")).click(function(){var d=parseInt(c.children("li.current").text()),b=d-1,g=a.ulClass+b;1<=d-1&&("function"==typeof a.backFn&&a.backFn(d-1),f.pageAjax(b,g,a,!1,c))});b(c.siblings(".pageN")).click(function(){var d=parseInt(c.children("li.current").text()),b=d+1,g=a.ulClass+b;d+1<=a.pageCount&&("function"==typeof a.backFn&&a.backFn(d+1),f.pageAjax(b,g,a,!1,c))});b(c.parents(".m_qa").find("#qa_type")).change(function(){f.pageAjax(1,a.ulClass+1,a,!0,c)});b(c.parents(".m_qa").find("#qa_search").children("a")).click(function(){""!=b("#qa_search").children("input").val()&&f.pageAjax(1,a.ulClass+1,a,!0,c)});b(c.parents(".m_qa").find("#qa_search").children("input")).keydown(function(b){13==b.keyCode&&f.pageAjax(1,a.ulClass+1,a,!0,c)})}()},pageAjax:function(c,a,d,e,g){a={};b("#spu").val();a=b.trim(b("#qa_search").children("input").val());if("qa_c"==d.ulClass){e=b("#qa_type").children("option:selected").val();var h=b("#qa_search").offset().top;b(window).scrollTop(h-130);a=""!=a?{page:c,orderType:e,qaTitle:a}:{page:c,orderType:e}}else a={page:c};b.ajax({type:"GET",cache:!1,url:d.ajaxUrl,data:a,dataType:"html",success:function(a){b(d.initBox).html(a);a=b(g.parents(".m_qa")).find("input[name\x3dqaNumber]").val();var k=b(g.parent(".bm_page"));a||""==a?d.pageCount=a:a=d.pageCount;f.fillHtml(g,{current:c,pageCount:a,ulClass:d.ulClass});""==a||1>=a?k.hide():k.show()}})}};b.fn.createPage=function(c){c=b.extend({pageCount:10,current:1,initBox:"",ulClass:"",ajaxUrl:"",backFn:function(){}},c);f.init(this,c)}})(jQuery);$(function(){function b(a,c){var b=a.data("like"),b={cqaId:a.data("id"),isLike:b};null!=TT_NS.cookie.get("LOGIN_TOKEN")?$.ajax({type:"GET",cache:!1,url:"/index.php?r\x3ddetails/default/qareplaydigg",data:b,dataType:"json",success:function(b){if(1==b.ret){b=a.siblings("#vote");var d=Number(b.text()),d=1==c?d+1:d-1;a.addClass("on");c?$.tipsBox({obj:a,str:"+1",color:"#f90",startSize:"20px"}):$.tipsBox({obj:a,str:"-1",color:"#f90",startSize:"20px"});b.text(d)}}}):(TT_NS.cookie.tem("TT_REDIRECT_URL",window.location.href),window.location.href=TT_CONFIG.loginUrl)}var f=$("#riviewsList").siblings(".bm_page").data("page"),c=$("#spu").val(),a="/index.php?r\x3ddetails/default/ajaxreview\x26spu\x3d"+c,d=$("#productSku").val(),e=$(".qaPage1").siblings(".bm_page").data("page"),g="/index.php?r\x3dqa/default/getlistbyskus\x26skus\x3d"+d,h=$(".qa_c").siblings(".bm_page").data("page"),l="/index.php?r\x3ddetails/default/qalist\x26spu\x3d"+c+"\x26sku\x3d"+d;$("#riviewsList").siblings(".bm_page").children(".pages").createPage({pageCount:f,current:1,initBox:"#riviewsList",ulClass:"reviewPage",ajaxUrl:a,backFn:function(a){}});$(".qa_c1").siblings(".bm_page").children(".pages").createPage({pageCount:h,current:1,initBox:".qa_c1",ulClass:"qa_c",ajaxUrl:l,backFn:function(a){}});$(".qaPage1").siblings(".bm_page").children(".pages").createPage({pageCount:e,current:1,initBox:".qaPage1",ulClass:"qaPage",ajaxUrl:g,backFn:function(a){}});$(document).on("click",".see_more",function(){var a=$(this),b=a.data("qaid"),e=a.data("num"),f=a.data("remain"),g=a.data("click"),b={qaId:b,num:g,spu:c,sku:d,totalanswer:e};3>=g&&$.ajax({type:"GET",cache:!1,url:"/index.php?r\x3ddetails/default/qareplay",data:b,dataType:"html",success:function(b){var c=f-2;a.siblings("ul").append(b);a.data("click",g+1);a.data("remain",c);0<c&&3>g?a.children(".qa_num").html(c+"\x3ci\x3e\x3c/i\x3e"):a.hide()}})});$(document).on("click",".up_icon",function(){var a=$(this);b(a,!0)});$(document).on("click",".down_icon",function(){var a=$(this);b(a,!1)})});